A complete classification of the expressiveness of interval logics of Allen's relations over dense linear orders Luca Aceto* , Dario Della Monica* , Anna Ingolfsdottir* , Angelo Montanari+ and Guido Sciavicco++ ICE-TCS, School of Computer Science, Reykjavik University, Iceland - Email: {luca,dariodm,annai}@ru.is + Department of Mathematics and Computer Science, University of Udine, Italy - Email: angelo.montanari@uniud.it ++ Department of Information Engineering and Communications, University of Murcia, Spain - Email: guido@um.es *  Abstract--Interval temporal logics are temporal logics that take time intervals, instead of time instants, as their primitive temporal entities.
One of the most studied interval temporal logics is Halpern and Shoham's modal logic of time intervals (HS), which has a distinct modality for each binary relation between intervals over a linear order.
As HS turns out to be undecidable over most classes of linear orders, the study of HS fragments, featuring a proper subset of HS modalities, is a major item in the research agenda for interval temporal logics.
A characterization of HS fragments in terms of their relative expressive power has been given for the class of all linear orders.
Unfortunately, there is no easy way to directly transfer such a result to other meaningful classes of linear orders.
In this paper, we provide a complete classification of the expressiveness of HS fragments over the class of (all) dense linear orders.
Keywords-Interval Temporal Logics; Expressive Power; Bisimulations.
I. I NTRODUCTION Interval reasoning naturally arises in various fields of computer science and AI, ranging from hardware and realtime system verification to natural language processing, from constraint satisfaction to planning [1], [2], [3], [4], [5], [6].
Interval temporal logics make it possible to automate reasoning on interval structures over (linearly) ordered domains, where time intervals, rather than time instants, are the primitive ontological entities.
The variety of binary relations between intervals in a linear order was first studied by Allen [5], who investigated their use in systems for time management and planning.
In [7], Halpern and Shoham introduced and systematically analyzed the (full) logic of Allen's relations, called HS, that features one modality for each Allen's relation.
In particular, they showed that HS is highly undecidable over most classes of linear orders.
This result motivated the search for (syntactic) HS fragments The authors acknowledge the support from the Spanish fellowship program 'Ramon y Cajal' RYC-2011-07821 and the Spanish MEC project TIN2009-14372-C03-01 (G. Sciavicco), the project Processes and Modal Logics (project nr.
100048021) of the Icelandic Research Fund (L. Aceto, D. Della Monica, and A. Ingolfsdottir), the project Decidability and Expressiveness for Interval Temporal Logics (project nr.
130802-051) of the Icelandic Research Fund in partnership with the European Commission Framework 7 Programme (People) under "Marie Curie Actions" (D. Della Monica), and the Italian GNCS project Extended Game Logics (A. Montanari).
offering a good balance between expressiveness and decidability/complexity.
A comparative analysis of the expressive power of the variety of HS fragments naturally sets the scene for such a search.
This analysis is far from being trivial, because some HS modalities are definable in terms of others, and thus syntactically different fragments may turn out to be equally expressive.
To complicate matters, the ability of a given subset of HS modalities to define a specific modality may depend on the class of linear orders in which the logic is interpreted.
Many classes of linear orders are of practical interest, including the class of all linear orders and the class of all dense (resp., discrete, finite) linear orders, as well as the linear order of R (resp., Q, Z, and N).
In [8], Della Monica et al.
gave a complete characterization of all expressively different subsets of HS modalities over all linear orders.
Unfortunately, such a classification cannot be easily transferred to any other class of linear orders (proving a specific undefinability result amounts to providing a counterexample based on concrete linear orders belonging to the considered class).
As a matter of fact, specific assumptions on the underlying linear orders give rise, in general, to different sets of inter-definability equations.
In this paper, we give a complete classification of the expressiveness of HS fragments over all dense linear orders.
We assume strict semantics (excluding point intervals) and we identify a correct and complete set of inter-definability equations among HS modalities.
Undefinability results are essentially based on counterexamples referring to the linear order of R. However, the proposed constructions can be modified to deal with specific sub-classes of the class of all dense linear orders, e.g., the linear order of Q.
As a final result, we show that there are exactly 966 expressively different HS fragments over (all) dense linear orders (over all linear orders, they are 1347), out of 4096 distinct subsets of HS modalities.
II.
P RELIMINARIES Let D = hD, <i be a linear order.
An interval over D is an ordered pair [a, b], where a, b [?]
D and a <= b.
An interval is called a point (resp., strict) interval if a = b (resp., a < b).
In this paper, we restrict ourselves to strict intervals.
If we  HS modalities  Allen's relations  Graphical representation a b c d  hAi  [a, b]RA [c, d] = b = c  hLi  [a, b]RL [c, d] = b < c  hBi  [a, b]RB [c, d] = a = c, d < b  hEi  [a, b]RE [c, d] = b = d, a < c  hDi  [a, b]RD [c, d] = a < c, d < b  hOi  [a, b]RO [c, d] = a < c < b < d  Figure 1.  c  d  c d c d c  d c  d  Allen's interval relations and the corresponding HS modalities.
exclude equality, there are 12 different relations between two strict intervals in a linear order, often called Allen's relations [5]: the six relations RA , RL , RB , RE , RD , and RO depicted in Figure 1 and the inverse ones, that is, RX = (RX )-1 , for each X [?]
{A, L, B, E, D, O}.
We treat interval structures as Kripke structures and Allen's relations as accessibility relations over them, thus associating a modality hXi with each Allen's relation RX .
For each X [?]
{A, L, B, E, D, O}, the transpose of modality hXi is modality hXi, corresponding to the inverse relation RX of RX .
A. Syntax HS is a multi-modal logic with formulae built from a finite, non-empty set AP of atomic propositions, the propositional connectives [?]
and !, and a modality for each Allen's relation [7] .
With every subset {RX1 , .
.
.
, RXk } of these relations, we associate the fragment X1 X2 .
.
.
Xk of HS, whose formulae are defined by the grammar: ph ::= p | !ph | ph [?]
ph | hX1 iph | .
.
.
| hXk iph, where p [?]
AP.
The other propositional connectives and constants (e.g., [?
], -, and >) can be derived in the standard way, as well as the dual modalities (e.g., [A]ph [?]
!hAi!ph).
For a fragment F = X1 X2 .
.
.
Xk and a modality hXi, we write hXi [?]
F if X [?]
{X1 , .
.
.
, Xk }.
Given two fragments F1 and F2 , we write F1 [?]
F2 if hXi [?]
F1 implies hXi [?]
F2 , for every modality hXi.
Finally, for a fragment F = X1 X2 .
.
.
Xk and a formula ph, we write ph [?]
F, or, equivalently, we say that ph is an F-formula, meaning that ph belongs to the language of F. B.
Models and semantics The (strict) semantics of HS is given in terms of interval models M = hI(D), V i, where D is a linear order, I(D) is the set of all (strict) intervals over D, and V is a valuation function V : AP 7- 2I(D) , which assigns to every atomic proposition p [?]
AP the set of intervals V (p) on which p holds.
The truth of a formula on a given interval [a, b] in an interval model M is defined by structural induction on formulae as follows: * M, [a, b]  p iff [a, b] [?]
V (p), for each p [?]
AP;  M, [a, b]  !ps iff it is not the case that M, [a, b]  ps; M, [a, b]  ph [?]
ps iff M, [a, b]  ph or M, [a, b]  ps; * M, [a, b]  hXips iff there exists an interval [c, d] such that [a, b]RX [c, d] and M, [c, d]  ps, for each modality hXi.
For every p [?]
AP and [a, b] [?]
I(D), we say that [a, b] is a p-interval if M, [a, b]  p. By M, [a, b] 6 ps, we mean that it is not the case that M, [a, b]  ps.
Formulae of HS can be interpreted in several interesting classes of interval models over linear orders (in short, classes of linear orders).
Among them, we mention the following ones: * the class of all linear orders; * the class of (all) dense linear orders (i.e, those in which for every pair of distinct points there exists at least one point in between them -- e.g., Q, R); 1 * the class of (all) discrete linear orders (i.e, those in which every element, apart from the greatest element, if it exists, has an immediate successor, and every element, other than the least element, if it exists, has an immediate predecessor -- e.g., N, Z, Z + Z); * the class of (all) finite linear orders (i.e., those having only finitely many points).
A formula ph of HS is valid over a class C of linear orders, denoted C ph, if it is true on every interval in every interval model belonging to C. Two formulae ph and ps are equivalent relative to the class C of linear orders, denoted ph [?
]C ps, if C ph - ps.
* *  C. Definability and expressiveness The following definition formalizes the notion of definability of modalities in terms of others.
Definition 1 (Inter-definability).
A modality hXi of HS is definable in an HS fragment F relative to a class C of linear orders, denoted hXi C F, if hXip [?
]C ps for some Fformula ps over the atomic proposition p, for some p [?]
AP.
In such a case, the equivalence hXip [?
]C ps is called an inter-definability equation (or simply inter-definability) for hXi in F relative to C. We write hXi  6 C F if hXi is not definable in F over C. Notice that smaller classes of linear orders inherit the inter-definabilities holding for larger classes of linear orders.
Formally, if C1 and C2 are classes of linear orders such that C1 [?]
C2 , then all inter-definabilities holding for C2 are also valid for C1 .
However, more inter-definabilities can possibly hold for C1 .
On the other hand, undefinability results for C1 hold also for C2 .
In the rest of the paper, we will omit the class of linear orders when it is clear from the context 1 In the literature, these are sometimes called weakly discrete linear orders, in opposition to the so-called strongly discrete ones, where, for every pair of distinct points, there are only finitely many points in between them -- e.g., N, Z.
(e.g., we will simply say hXip [?]
ps and hXi  F instead of hXip [?
]C ps and hXi C F, respectively).
It is known from [7] that, in the strict semantics, all HS modalities are definable in the fragment containing modalities hAi, hBi, and hEi, and their transposes hAi, hBi, and hEi.
(In the non-strict semantics, including non-strict intervals and defined accordingly, the four modalities hBi, hEi, hBi, and hEi suffice, as shown in [9].)
In this paper, we compare and classify the expressiveness of all HS fragments relative to the class of all dense linear orders.
Formally, let F1 and F2 be any pair of such fragments.
We say that: * F2 is at least as expressive as F1 , denoted F1  F2 , if each modality hXi [?]
F1 is definable in F2 ; * F1 is strictly less expressive than F2 (or, equivalently, F2 is strictly more expressive than F1 ), denoted F1 [?]
F2 , if F1  F2 holds but F2  F1 does not; * F1 and F2 are equally expressive (or, expressively equivalent), denoted F1 [?]
F2 , if both F1  F2 and F2  F1 hold; * F1 and F2 are expressively incomparable, denoted F1 6[?]
F2 , if neither F1  F2 nor F2  F1 hold.
Now, it is possible to define the notion of optimal interdefinability, as follows.
Definition 2 (Optimal inter-definability).
A definability hXi  F is optimal if hXi 6 F 0 for any fragment F 0 such that F 0 [?]
F. In order to show non-definability of a given modality in an HS fragment, we use a standard technique in modal logic, based on the notion of bisimulation and the invariance of modal formulae with respect to bisimulations (see, e.g., [10], [11]).
Let F be an HS fragment.
An F-bisimulation between two interval models M = hI(D), V i and M 0 = hI(D0 ), V 0 i over AP is a relation Z [?]
I(D) x I(D0 ) satisfying the following properties: * local condition: Z-related intervals satisfy the same atomic propositions in AP; 0 0 * forward condition: if [a, b]Z[a , b ] and [a, b]RX [c, d] for some hXi [?]
F, then there exists some [c0 , d0 ] such that [a0 , b0 ]RX [c0 , d0 ] and [c, d]Z[c0 , d0 ]; 0 0 0 0 * backward condition: if [a, b]Z[a , b ] and [a , b ]RX 0 0 [c , d ] for some hXi [?]
F, then there exists some [c, d] such that [a, b]RX [c, d] and [c, d]Z[c0 , d0 ].
The important property of bisimulations used here is that any F-bisimulation preserves the truth of all formulae in F, that is, if ([a, b], [a0 , b0 ]) [?]
Z and Z is an F-bisimulation, then [a, b] and [a0 , b0 ] satisfy exactly the same formulae in F. Thus, in order to prove that a modality hXi is not definable in F, it suffices to construct a pair of interval models M = hI(D), V i and M 0 = hI(D0 ), V 0 i, and an Fbisimulation Z between them, relating a pair of intervals [a, b] [?]
I(D) and [a0 , b0 ] [?]
I(D0 ), such that M, [a, b]  hXip, while M 0 , [a0 , b0 ] 6 hXip.
In this case, we say that Z breaks hXi.
hLip hLip hOip hOip hDip hDip hLip hLip  [?]
hAihAip [?]
hAihAip [?]
hEihBip [?]
hBihEip [?]
hEihBip [?]
hEihBip [?]
hBi[E]hBihEip [?]
hEi[B]hEihBip  hLi A hLi A hOiBE hOiBE hDiBE hDiBE hLi BE hLi BE  Table I T HE COMPLETE SET OF OPTIMAL INTER - DEFINABILITIES FOR THE CLASS OF ALL LINEAR ORDERS .
D. The problem As we already pointed out, every subset of the set of the 12 modalities corresponding to Allen's relations gives rise to a logic, namely, a fragment of HS.
There are 212 (the cardinality of the powerset of the set of modalities) such fragments.
Due to possible inter-definabilities of modalities in terms of other ones, not all these fragments are expressively different.
The problem we consider here is the problem of obtaining a complete classification of all HS fragments with respect to their expressive power over the class of (all) dense linear orders.
In other words, given two HS fragments F1 , F2 , we want to be able to decide how they relate to each other with respect to expressiveness (that is, whether F1 is strictly less expressive than F2 , F1 is strictly more expressive than F2 , F1 and F2 are expressively equivalent, or F1 and F2 are incomparable).
In order to do so, all we need to do is to provide the complete set of optimal inter-definabilities between HS modalities.
Indeed, provided with such a set, it is immediate to decide which relation exists between any two given fragments with respect to their expressive power.
The class of all linear orders.
The problem we address in this paper has been solved for the class of all linear orders in [8], where the complete set of optimal inter-definabilities in Table I has been identified.
All the bisimulations used in [8] to solve the problem for the class of all linear orders are based on dense structures, apart from those for hLi and hLi, which are based on discrete structures.
As a consequence, the above results for all modalities but hLi and hLi immediately extend to all classes of dense linear orders.
In what follows, we identify a new set of optimal inter-definabilities holding for hLi and hLi over classes of dense linear orders, and we prove it to be complete (for the modalities hLi and hLi).
III.
T HE CLASS OF ALL DENSE LINEAR ORDERS From now on, we focus our attention on the class of all dense linear orders, and we provide bisimulations based on R. However, it is possible to extend our results to sub-classes of the class of all dense linear orders (that might not include R), by providing bisimulations based on different (suitable)  hLip hLip hLip hLip hLip hLip hLip hLip hLip hLip  [?]
hOi(hOi> [?]
[O]hDihOip) [?]
hOi(hOi> [?]
[O]hDihOip) [?]
hBi[D]hBihDihBip [?]
hEi[D]hEihDihEip [?]
hOi[E]hOihOip [?]
hOi[B]hOihOip [?]
hOi(hOi> [?]
[O]hBihOihOip) [?]
hOi(hOi> [?]
[O]hEihOihOip) [?]
hOi[O][L]hOihOip [?]
hOi[O][L]hOihOip  hLiDO hLiDO hLiBD hLiED hLiEO hLiBO hLiBO hLiEO hLiLO hLiLO  Table II A SET OF INTER - DEFINABILITY EQUATIONS FOR hLi AND hLi OVER THE CLASS OF ALL DENSE LINEAR ORDERS .
dense linear orders.
In what follows, we first prove that Table II depicts a set of inter-definabilities for the operators hLi and hLi (Lemma 1).
Then, we show that the union of all equations for hLi and hLi shown in Table I and Table II constitutes the complete set of optimal inter-definabilities for those operators (Theorem 1).
Lemma 1.
Table II depicts a set of inter-definabilities for the operators hLi and hLi.
Proof: Notice that it is enough to verify the interdefinability equations relative to hLi, as those for hLi follow by symmetry.
Here we only give the proof for the first equation.
The other proofs proceed analogously and are omitted.
(See the Appendix for full details.)
Firstly, suppose that M, [a, b]  hLip for an interval [a, b] in a model M .
We want to prove that M, [a, b]  hOi(hOi> [?]
[O]hDihOip) holds as well.
By M, [a, b]  hLip, it follows that there exists an interval [c, d] in M such that b < c and M, [c, d]  p. Consider an interval [a0 , c], with a < a0 < b (the existence of such a point a0 is guaranteed by the density of the linear order).
It is such that [a, b]RO [a0 , c] and it satisfies: 0 * hOi>, as [a , c]RO [b, d], and 0 * [O]hDihOip, as every interval [e, f ], with [a , c]RO [e, f ], is such that e < c < f .
Thus, by density, there exists an interval [e0 , f 0 ] such that [e, f ]RD [e0 , f 0 ] and [e0 , f 0 ]RO [c, d], which implies M, [e, f ]  hDihOip, which, in turn, implies M, [a0 , c]  [O]hDihOip.
Hence, M, [a0 , c]  hOi> [?]
[O]hDihOip and M, [a, b]  hOi(hOi> [?]
[O]hDihOip).
Secondly, let us assume that M, [a, b]  hOi(hOi> [?]
[O]hDihOip) for an interval [a, b] in a model M .
That means that there exists an interval [c, d] such that [a, b]RO [c, d] and that (i) M, [c, d]  hOi>, and thus there exists a point e > d, and (ii) M, [c, d]  [O]hDihOip.
The interval [b, e] is such that [c, d]RO [b, e], and thus, by (ii), it satisfies hDihOip.
Therefore, there exists an interval [f, g] such that [b, e]RD [f, g], and a p-interval [h, i] with [f, g]RO [h, i].
Since h > b, we conclude that M, [a, b]  hLip.
The rest of the paper is devoted to establishing our main  Algorithm 1 Max = maxF ragN onDef Op(Def, hXi) input parameters: - Def : list of inter-definabilities - hXi: modality output parameters: - Max: list of maximal fragments not defining hXi according to Def 1: Max - [?]
2: for all HS fragment F do 3: F - addDef inableOperators(F , Def ) 4: if hXi [?]
/ F then 5: add - true 6: for all F1 [?]
Max do 7: if F  F1 then 8: add - false 9: else if F1 [?]
F then 10: remove(Max, F1 ) 11: if add then 12: add(Max, F ) 13: return Max  result, that is, to prove that Table I and Table II depict a complete set of optimal inter-definabilities for the operator hLi.
This means that we cannot define hLi by means of any other optimal equation.
It is immediate to verify, by symmetry, that the same result holds for the operator hLi.
As a first step, we need to identify all maximal HS fragments not containing, as definable (according to the inter-definabilities of Table I and Table II), the operator hLi.
Given the large number of inter-definabilities, it is not immediate to detect all such fragments.
For this purpose, we used a tool based on the pseudo-code presented in Algorithm 1.
The algorithm takes as input a list Def of known interdefinabilities and a modality hXi, and it returns the list M ax of maximal fragments that are not capable to define hXi according to the definabilities in Def .
For each HS fragment F (line 2), the algorithm proceeds as follows.
First (line 3), it computes the fragment F which is expressively equivalent to F but whose language also explicitly includes all the modalities that are included only as definable in F (e.g., it computes ALBED from ABE).
Next (line 4), if modality hXi does not belong to the language of F, then F is a potential candidate to be part of the output list M ax.
So, its expressive power is compared (lines 6-10) to the one of the elements currently belonging to M ax and it is added to it if and only if there is no fragment in M ax which is at least as expressive as F (lines 7-8 and 11-12).
Finally, the algorithm removes from M ax every fragment that is strictly less expressive than F (lines 9-10), before returning the desired list of fragments M ax (line 13).
The algorithm, run on the list of inter-definabilities in Table I and Table II, and on modality hLi as input parameters, returned the three maximal fragments OBEDO, BEDALEDO, and BALBEDO.
In the light of the interdefinabilities in Table I, we can replace these three fragments with equivalent fragments featuring the smallest set of modalities, namely, OBEO, BEAED, and BABE, respectively.
Now, in order to establish the optimality of the set  of inter-definabilities, for each such fragment F, we provide an F-bisimulation that breaks hLi.
In what follows, thanks to the next proposition, in our proofs we can safely assume that for each interval [a, b] and Allen's relation RX , there exists an interval [c, d] such that [a, b]RX [c, d].
Proposition 1.
Let D be a dense linear order without least and greatest elements, and let [a, b] [?]
I(D).
Then, there exists an interval [c, d] [?]
I(D) such that [a, b]RX [c, d], for each X [?]
{A, L, B, E, D, O, A, L, B, E, D, O}.
A.
An OBEO-bisimulation that breaks hLi Consider the two interval models M and M 0 , defined as M = M 0 = hI(R), V i, where V (p) = {[-a, a] | a [?]
R} (observe that no interval [c, d], with c >= 0, satisfies p).
Moreover, let Z = {([a, b], [a0 , b0 ]) | -a ~ b and - a0 ~ b0 for some ~[?]
{<, =, >}} (see Figure 2).
Lemma 2.
Z is a OBEO-bisimulation.
Proof: Local condition.
Consider a pair ([a, b], [a0 , b0 ]) of Z-related intervals.
The following chain of double implications hold: M, [a, b]  p iff -a = b iff (by the definition of Z) -a0 = b0 iff M, [a0 , b0 ]  p. Forward condition.
Consider the three intervals [a, b], [a0 , b0 ], and [c, d] such that [a, b]Z[a0 , b0 ] and [a, b]RX [c, d] for some X [?]
{O, B, E, O}.
We need to exhibit an interval [c0 , d0 ] such that [a0 , b0 ]RX [c0 , d0 ] and [c, d]Z[c0 , d0 ].
We distinguish three cases.
0 0 * If -a > b and -a > b , then, as a preliminary step, we show that the following facts hold: (i) a < 0 and a0 < 0; (ii) |a| > |b| and |a0 | > |b0 |.
We only show the proofs for a < 0 and |a| > |b| and we omit the ones for a0 < 0 and |a0 | > |b|, which are analogous.
As for the former claim above, it is enough to observe that, if a >= 0, then a >= 0 >= -a > b, which implies b < a, leading to a contradiction with the fact that [a, b] is an interval (thus a < b).
Notice that, as an immediate consequence, we have that |a| = -a holds.
As for the latter claim above, firstly we suppose, by contradiction, that |a| = |b| holds.
Then, -a = |a| = |b| holds and this implies either b = -a, contradicting the hypothesis that -a > b, or b = a, contradicting the fact that [a, b] is an interval.
Secondly, we suppose, again by contradiction, that |a| < |b| holds.
Then, by the former claim, we have that 0 < -a = |a| < |b| holds, which implies b 6= 0.
Now, we show that both b < 0 and b > 0 lead to a contradiction.
If b < 0, then |b| = -b, and thus it holds -a < -b, which amounts to a > b, contradicting the fact that [a, b] is an interval.
If b > 0, then |b| = b, and thus it holds -a < b, which contradicts the hypothesis that -a > b.
This proves the two claims above.
Now, we distinguish the following sub-cases.
- If X = O, then [c, d] is such that a < c < b < d. We distinguish the following cases.
*  * If -c > d, then take some c0 such that a0 < c0 < -|b0 | < 0 (notice also that c0 < -|b0 | <= b0 trivially holds), and d0 such that b0 < d0 < |c0 | = -c0 (the existence of such points c0 , d0 is guaranteed by the density of R).
The interval [c0 , d0 ] is such that [a0 , b0 ]RO [c0 , d0 ] and [c, d]Z[c0 , d0 ].
* If -c = d, then take some c0 such that a0 < c0 < -|b0 | < 0, and d0 = -c0 (the existence of such a point c0 is guaranteed by the density of R).
The interval [c0 , d0 ] is such that [a0 , b0 ]RO [c0 , d0 ] and [c, d]Z[c0 , d0 ].
* If -c < d, then take c0 such that a0 < c0 < -|b0 | < 0, and any d0 > -c0 (the existence of such a point c0 is guaranteed by the density of R).
The interval [c0 , d0 ] is such that [a0 , b0 ]RO [c0 , d0 ] and [c, d]Z[c0 , d0 ].
- If X = B, then [c, d] is such that a = c < b < d. We distinguish the cases below.
* If -c > d, then take c0 = a0 and d0 such that b0 < d0 < -a0 = -c0 (the existence of such a point d0 is guaranteed by the density of R).
The interval [c0 , d0 ] is such that [a0 , b0 ]RB [c0 , d0 ] and [c, d]Z[c0 , d0 ].
* If -c = d, then take c0 = a0 and d0 = -c0 (= -a0 > b0 ).
The interval [c0 , d0 ] is such that [a0 , b0 ]RB [c0 , d0 ] and [c, d]Z[c0 , d0 ].
* If -c < d, then take c0 = a0 and any d0 > -c0 (= -a0 > b0 ).
The interval [c0 , d0 ] is such that [a0 , b0 ]RB [c0 , d0 ] and [c, d]Z[c0 , d0 ].
- If X = E, then [c, d] is such that c < a < b = d. Notice that |c| = -c > -a = |a| holds, because c < a < 0.
Thus -c > -a > b = d also holds.
Then, take d0 = b0 and any c0 < a0 .
We have that -c0 > -a0 > b0 = d0 .
The interval [c0 , d0 ] is therefore such that [a0 , b0 ]RE [c0 , d0 ] and [c, d]Z[c0 , d0 ].
- If X = O, then [c, d] is such that c < a < d < b.
Notice that |c| = -c > -a = |a| holds, because c < a < 0.
Thus -c > -a > b > d also holds.
Then, take some d0 such that a0 < d0 < b0 and any c0 < a0 (the existence of such a point d0 is guaranteed by the density of R).
Thus, it holds -c0 > -a0 > b0 > d0 .
The interval [c0 , d0 ] is therefore such that [a0 , b0 ]RO [c0 , d0 ] and [c, d]Z[c0 , d0 ].
If -a = b and -a0 = b0 , then we have that a < 0 (resp., a0 < 0) and b > 0 (resp., b0 > 0).
Indeed, if a >= 0 held, then b = -a <= 0 <= a would also hold, contradicting the fact that [a, b] is an interval (and thus b > a).
From a < 0 and -a = b, it immediately follows that b > 0.
The facts that a0 < 0 and b0 > 0 can be shown analogously.
Notice also that, from -a = b and -a0 = b0 , it follows that |a| = |b| and |a0 | = |b0 |.
Now, we distinguish the following sub-cases.
- If X = O, then [c, d] is such that a < c < b < d. Notice that -c <= |c| < |a| = |b| = b < d holds.
-4 -3 -2 -1 0  1  2  3  ... p p  R  -3 -2 -1 0  4  R  ...  Z  OBEO-bisimulation.
*  Backward condition.
Since the relation Z is symmetric, the forward condition implies the backward condition, as follows.
Consider a pair ([a, b], [a0 , b0 ]) of Z-related intervals and an interval [c0 , d0 ] such that [a0 , b0 ]RX [c0 , d0 ], for some X [?]
{O, B, E, O}.
We need to find an interval [c, d] such that [a, b]RX [c, d] and [c, d]Z[c0 , d0 ].
By symmetry, ([a0 , b0 ], [a, b]) [?]
Z, as well.
By the forward condition, we know that for every interval [c0 , d0 ] such that [a0 , b0 ]RX [c0 , d0 ], for some X [?]
{O, B, E, O}, there exists an interval [c, d] such that [a, b]RX [c, d] and [c0 , d0 ]Z[c, d].
By symmetry [c, d]Z[c0 , d0 ] also holds, hence the backward condition is fulfilled, too.
It can be easily checked that the given proof of Lemma 2 still works if we substitute Q for R. Corollary 1.
The modality hLi is not definable in the fragment OBEO (and in any of its sub-fragments) over the class of all dense linear orders.
4  5  p  f  hLip  b  a  a  a  !hLip  Z  f hLip  b  hLip  a  b  b  f !hLip  Z  f  Then, take c0 = 0 and any d0 > b0 (> 0).
We have that -c0 < d0 .
The interval [c0 , d0 ] is such that [a0 , b0 ]RO [c0 , d0 ] and [c, d]Z[c0 , d0 ].
- If X = B, then [c, d] is such that a = c < b < d. Notice that -c <= |c| = |a| = |b| = b < d holds.
Then, take c0 = a0 and any d0 > b0 .
We have that -c0 = -a0 = b0 < d0 .
The interval [c0 , d0 ] is such that [a0 , b0 ]RB [c0 , d0 ] and [c, d]Z[c0 , d0 ].
- If X = E, then [c, d] is such that c < a < b = d. Notice that |c| = -c > -a = |a| holds, because c < a < 0.
Thus -c > -a = b = d also holds.
Then, take d0 = b0 and any c0 < a0 .
We have that -c0 > -a0 = b0 = d0 .
The interval [c0 , d0 ] is such that [a0 , b0 ]RE [c0 , d0 ] and [c, d]Z[c0 , d0 ].
- If X = O, then [c, d] is such that c < a < d < b.
Notice that |c| = -c > -a = |a| holds, because c < a < 0.
Thus -c > -a = b > d also holds.
Then, take d0 = 0 and any c0 < a0 (< 0).
We have that -c0 > d0 .
The interval [c0 , d0 ] is such that [a0 , b0 ]RO [c0 , d0 ] and [c, d]Z[c0 , d0 ].
If -a < b and -a0 < b0 , then the proof proceeds symmetrically to the case when -a > b and -a0 > b0 .
More precisely, the argument used there for modalities hOi and hEi applies now to modalities hOi and hBi, and vice versa.
(See the Appendix for full details.)
3  f a  !hLip  Figure 2.
2  no p-intervals start here  ... p  hLip  1  b  f a  !hLip  b  Z Figure 3.
BEAED-bisimulation.
Proof: It is immediate to check that [-4, -2]Z[-4, 2].
Moreover, it holds that M, [-4, -2]  hLip (as M, [-1, 1]  p) and M 0 , [-4, 2]  !hLip (as no interval [c, d], with c > 0, satisfies p).
Thus, the thesis immediately follows from Lemma 2, because Z is an OBEO-bisimulation that breaks hLi.
B.
A BEAED-bisimulation that breaks hLi In order to define a BEAED-bisimulation that breaks hLi, we will make use of the function f : R - {x [?]
R | x < 1}, defined as follows.
 x - 1 if x <= 1 f (x) = 1 - x1 if x > 1 In particular, we use the properties of f stated by the next lemma, whose straightforward proof is omitted.
(See the Appendix for full details.)
Lemma 3. f is a monotonically increasing bijection from R to {x [?]
R | x < 1} such that f (x) < x for every x [?]
R. The bisimulation that breaks hLi is defined as follows.
We consider two interval models M and M 0 , defined as M = M 0 = hI(R), V i, where V (p) = {[a, b] | a = f (b)} and let Z = {([a, b], [a0 , b0 ]) | a ~ f (b), a0 ~ f (b0 ) for some ~[?]
{<, =, >}} (see Figure 3).
Lemma 4.
Z is a BEAED-bisimulation.
Proof: Local condition.
Consider a pair ([a, b], [a0 , b0 ]) of Z-related intervals.
The following chain of double implications holds: M, [a, b]  p iff a = f (b) iff (by the definition of Z) a0 = f (b0 ) iff M 0 , [a0 , b0 ]  p. Forward condition.
Consider the three intervals [a, b], [a0 , b0 ], and [c, d] such that [a, b]Z[a0 , b0 ] and [a, b]RX [c, d] for some X [?]
{B, E, A, E, D}.
We need to exhibit an interval [c0 , d0 ] such that [a0 , b0 ]RX [c0 , d0 ] and [c, d]Z[c0 , d0 ].
We distinguish three cases.
*  *  If a > f (b) and a0 > f (b0 ), then we distinguish the following sub-cases.
- If X = B, then [c, d] is such that a = c < d < b.
By the monotonicity of f , we have that f (d) < f (b) < a = c. Moreover, by the monotonicity of f , for every interval [c0 , d0 ], with [a0 , b0 ]RB [c0 , d0 ], f (d0 ) < c0 holds, and thus [c, d]Z[c0 , d0 ].
- If X = E, then [c, d] is such that a < c < b = d. Thus, f (d) = f (b) < a < c. For every interval [c0 , d0 ], with [a0 , b0 ]RE [c0 , d0 ], f (d0 ) < c0 holds, and thus [c, d]Z[c0 , d0 ].
- If X = A, then [c, d] is such that c < d = a.
Now, if c < f (d) = f (a), then, by the definition of f and Lemma 3, there exists a point c0 such that c0 < f (a0 ) < a0 .
Thus, the interval [c0 , d0 ], with d0 = a0 , is such that [a0 , b0 ]RA [c0 , d0 ] and [c, d]Z[c0 , d0 ].
If c = f (d) = f (a), then take c0 = f (a0 ) < a0 .
The interval [c0 , d0 ], with d0 = a0 , is such that [a0 , b0 ]RA [c0 , d0 ] and [c, d]Z[c0 , d0 ].
If c > f (d) = f (a), then, by the density of R, the definition of f , and Lemma 3, there exists a point c0 such that f (a0 ) < c0 < a0 .
The interval [c0 , d0 ], with d0 = a0 , is such that [a0 , b0 ]RA [c0 , d0 ] and [c, d]Z[c0 , d0 ].
- If X = E, then [c, d] is such that c < a < b = d. There are three possibilities.
If c < f (d), then, by the definition of f , there exists a point c0 such that c0 < f (b0 ) < a0 .
Thus, the interval [c0 , d0 ], with d0 = b0 , is such that [a0 , b0 ]RE [c0 , d0 ] and [c, d]Z[c0 , d0 ].
If c = f (d), then the interval [c0 , d0 ], with d0 = b0 and c0 = f (d0 ), is such that [a0 , b0 ]RE [c0 , d0 ] and [c, d]Z[c0 , d0 ].
If c > f (d), then, by the density of R, , there exists a point c0 such that f (b0 ) < c0 < a0 , and the interval [c0 , d0 ], with d0 = b0 , is such that [a0 , b0 ]RE [c0 , d0 ] and [c, d]Z[c0 , d0 ].
- If X = D, then [c, d] is such that c < a < b < d. If c < f (d), then, take c0 = f (a0 ) and any d0 > b0 .
The interval [c0 , d0 ] is such that [a0 , b0 ]RD [c0 , d0 ] and [c, d]Z[c0 , d0 ].
If c = f (d) (resp., c > f (d)), then, by the density of R and the monotonicity and the surjectivity of f , there exist two points c0 , d0 such that c0 < a0 < b0 < d0 and c0 = f (d0 ) (resp., c0 > f (d0 )).
Thus, the interval [c0 , d0 ] is such that [a0 , b0 ]RD [c0 , d0 ] and [c, d]Z[c0 , d0 ].
If a < f (b) and a0 < f (b0 ), then we distinguish the following sub-cases.
- If X = B, then [c, d] is such that a = c < d < b.
Now, if c < f (d) (resp., c = f (d), c > f (d)), then, by the density of R and by the monotonicity and the surjectivity of f , there exists a point d0 such that a0 < d0 < b0 and a0 < f (d0 ) (resp., a0 = f (d0 ), a0 > f (d0 )).
Thus, the interval [c0 , d0 ], with c0 = a0 , is such that [a0 , b0 ]RB [c0 , d0 ] and [c, d]Z[c0 , d0 ].
- If X = E, then [c, d] is such that a < c < b = d.  *  Now, if c < f (d) (resp., c = f (d), c > f (d)), then, by the density of R, there exists a point c0 such that a0 < c0 < b0 and c0 < f (b0 ) (resp., c0 = f (b0 ), c0 > f (b0 )).
Thus, the interval [c0 , d0 ], with d0 = b0 , is such that [a0 , b0 ]RE [c0 , d0 ] and [c, d]Z[c0 , d0 ].
- If X = A, then the same argument of the case when a > f (b) and a0 > f (b0 ) (and X = A) applies.
- If X = E, then [c, d] is such that c < a < b = d. Thus, c < a < f (b) = f (d).
For every interval [c0 , d0 ], with [a0 , b0 ]RE [c0 , d0 ], it holds c0 < f (d0 ), and thus [c, d]Z[c0 , d0 ].
- If X = D, then [c, d] is such that c < a < b < d. Thus, by the monotonicity of f , it holds that c < a < f (b) < f (d).
For every interval [c0 , d0 ], with [a0 , b0 ]RD [c0 , d0 ], it holds, by the monotonicity of f , that c0 < f (d0 ), and thus [c, d]Z[c0 , d0 ].
If a = f (b) and a0 = f (b0 ), then we distinguish the following sub-cases.
- If X = B, then [c, d] is such that a = c < d < b.
Thus, by the monotonicity of f , it holds that f (d) < f (b) = a = c. For every interval [c0 , d0 ], with [a0 , b0 ]RB [c0 , d0 ], by the monotonicity of f , we have that f (d0 ) < c0 , and thus [c, d]Z[c0 , d0 ].
- If X = E, then [c, d] is such that a < c < b = d. Thus, c > a = f (b) = f (d) holds.
For every interval [c0 , d0 ], with [a0 , b0 ]RE [c0 , d0 ], we have that c0 > f (d0 ), and thus [c, d]Z[c0 , d0 ].
- If X = A, then the same argument of the case when a > f (b) and a0 > f (b0 ) (and X = A) applies.
- If X = E, then [c, d] is such that c < a < b = d. Thus, c < a = f (b) = f (d).
For every interval [c0 , d0 ], with [a0 , b0 ]RE [c0 , d0 ], c0 < f (d0 ) holds, and thus [c, d]Z[c0 , d0 ].
- If X = D, then [c, d] is such that c < a < b < d. Thus, by the monotonicity of f , it holds that c < a = f (b) < f (d).
For every interval [c0 , d0 ], with [a0 , b0 ]RD [c0 , d0 ], by the monotonicity of f , we have that c0 < f (d0 ), and thus [c, d]Z[c0 , d0 ].
Backward condition.
The backward condition can be immediately verified by observing that the forward condition is satisfied and that Z is a symmetric relation.
As in the case of Lemma 2, it can be easily checked that the proof of Lemma 4 still works if we substitute Q for R. Corollary 2.
The modality hLi is not definable in the fragment BEAED (and in any of its sub-fragments) over the class of all dense linear orders.
Proof: It is immediate to check that [-1, 0]Z[0, 1] (as f (0) = -1 and f (1) = 0).
Moreover, it holds that M, [-1, 0]  hLip (as M, [0.5, 2]  p because f (2) = 0.5) and M 0 , [0, 1]  !hLip (as no interval [c, d], with c > 1, satisfies p because c is not in the image of f for each c > 1).
Thus, the thesis immediately follows from Lemma 4.
C. A BABE-bisimulation that breaks hLi Consider the two interval models M and M 0 , defined as M = hI(R), V i and M 0 = hI(R), V 0 i, respectively, where V (p) = {[a, b] | a, b [?]
Q or a, b [?]
R \ Q} and V 0 (p) = {[a0 , b0 ] | a0 <= 0 and (a0 , b0 [?]
Q or a0 , b0 [?]
R \ Q)}.
Moreover, let Z = {([a, b], [a0 , b0 ]) | a0 <= -1 and M, [a, b]  p iff M 0 , [a0 , b0 ]  p}.
Lemma 5.
Z is a BABE-bisimulation.
Proof: Local condition.
The local condition follows immediately from the definition of Z.
Forward condition.
Consider a pair ([a, b], [a0 , b0 ]) of Zrelated intervals.
By definition of Z, it holds that a0 <= -1 (and thus a0 <= 0).
Let X [?]
{B, A, B, E}.
For every interval [c0 , d0 ], with [a0 , b0 ]RX [c0 , d0 ], it holds that c0 <= -1 (and thus c0 <= 0).
Let Q = R \ Q.
By density and unboundedness of Q and Q, there exist (i) an interval [c00 , d00 ], such that [a0 , b0 ]RX [c00 , d00 ], with c00 , d00 [?]
Q or c00 , d00 [?]
Q, and (ii) an interval [c000 , d000 ], such that [a0 , b0 ]RX [c000 , d000 ], with c000 [?]
S, d000 [?]
S0 for some S, S0 [?]
{Q, Q}, with S 6= S0 .
Therefore, for every [c, d] such that [a, b]RX [c, d], there exists [c0 , d0 ] such that [a0 , b0 ]RX [c0 , d0 ] and [c, d]Z[c0 , d0 ].
Backward condition.
In order to check the backward condition, it is possible to use an argument which is analogous to the one used for checking the forward condition.
Unlike the cases of Lemma 2 and Lemma 4, the proof of Lemma 5 cannot be immediately transferred to Q.
However, it can be easily adapted by providing a partition of Q in two sets Q1 and Q2 which are both dense in Q. Corollary 3.
The modality hLi is not definable in the fragment BABE (and in any of its sub-fragments) over classes of dense linear orders.
IV.
C ONCLUSIONS In this paper, we have extended the results in [8] to obtain the optimal set of inter-definabilities among all modal operators in HS over the class of all dense linear orders.
More precisely, we have provided a characterization of the relative expressive power of all interval logics definable as fragments of HS in the particular case of dense structures, and we have found out that there are exactly 966 expressively different fragments.
Such a classification has a number of important applications, such as, for example, allowing one to properly identify the (small) set of HS fragments for which the decidability of the satisfiability problem is still an open problem.
A natural question that arises is: how do the interdefinabilities change when other classes of linear orders are considered?
Interesting (open) cases include, among others, the class of all discrete linear orders and the class of all finite linear orders.
R EFERENCES [1] D. Della Monica, V. Goranko, A. Montanari, and G. Sciavicco, "Interval temporal logics: a journey," Bulletin of the European Association for Theoretical Computer Science, vol.
105, pp.
73-99, 2011.
[2] B. Moszkowski, "Reasoning about digital circuits," Tech.
Rep. STAN-CS-83-970, Dept.
of Computer Science, Stanford University, Stanford, CA, 1983.
[3] C. Zhou and M. R. Hansen, Duration Calculus: A formal approach to real-time systems, ser.
EATCS Monographs in Theoretical Computer Science.
Springer, 2004.
[4] I. Pratt-Hartmann, "Temporal prepositions and their logic," Artificial Intelligence, vol.
166, no.
1-2, pp.
1-36, 2005.
[5] J. F. Allen, "Maintaining knowledge about temporal intervals," Communications of the ACM, vol.
26, no.
11, pp.
832- 843, 1983.
Proof: It is immediate to check that [-1, 0]Z[-1, 0].
Moreover, it holds that M, [-1, 0]  hLip (as M, [0, 1]  p) and M 0 , [-1, 0]  !hLip (as no interval [c, d], with c > 0, satisfies p in M 0 ).
Thus, the thesis immediately follows from Lemma 5.
[6] ----, "Towards a general theory of action and time," Artificial Intelligence, vol.
23, no.
2, pp.
123-154, 1984.
Theorem 1.
Table I and Table II depict a complete set of optimal inter-definabilities for the modality hLi.
[8] D. Della Monica, V. Goranko, A. Montanari, and G. Sciavicco, "Expressiveness of the interval logics of Allen's relations on the class of all linear orders: Complete classification," in IJCAI, July 2011, pp.
845-850.
Proof: Suppose that there exists an optimal interdefinability for hLi which is not listed in Table I or Table II.
Let us denote by hLi  F such an inter-definability.
F must be a (not necessarily strict) fragment of one of the fragments returned by Algorithm 1 (i.e., OBEO, BEAED, and BABE), as such an algorithm returns the set of all maximal HS fragments not containing the modality hLi, as definable according to the inter-definabilities of Table I and Table II.
Then, by Corollaries 1-3, hLi is not definable by F, yielding a contradiction.
[7] J. Halpern and Y. Shoham, "A propositional modal logic of time intervals," Journal of the ACM, vol.
38, no.
4, pp.
935- 962, 1991.
[9] Y. Venema, "Expressiveness and completeness of an interval tense logic," Notre Dame Journal of Formal Logic, vol.
31, no.
4, pp.
529-547, 1990.
[10] P. Blackburn, M. de Rijke, and Y. Venema, Modal Logic.
Cambridge University Press, 2002.
[11] M. Hennessy and R. Milner, "Algebraic laws for nondeterminism and concurrency," Journal of the ACM, vol.
32, no.
1, pp.
137-161, 1985.
A PPENDIX Full proof of Lemma 1.
Proof: Notice that it is enough to verify the interdefinability equations relative to hLi, as the others follow by symmetry.
*  *  hLip [?]
hOi(hOi> [?]
[O]hDihOip).
Firstly, suppose that M, [a, b]  hLip for an interval [a, b] in a model M .
We want to prove that M, [a, b]  hOi(hOi> [?]
[O]hDihOip) holds as well.
By M, [a, b]  hLip, it follows that there exists an interval [c, d] in M such that b < c and M, [c, d]  p. Consider an interval [a0 , c], with a < a0 < b (the existence of such a point a0 is guaranteed by the density of the linear order).
It is such that [a, b]RO [a0 , c] and it satisfies: - hOi>, as [a0 , c]RO [b, d], and - [O]hDihOip, as every interval [e, f ], with [a0 , c]RO [e, f ], is such that e < c < f .
Thus, by density, there exists an interval [e0 , f 0 ] such that [e, f ]RD [e0 , f 0 ] and [e0 , f 0 ]RO [c, d], which implies M, [e, f ]  hDihOip, which, in turn, implies M, [a0 , c]  [O]hDihOip.
Hence, M, [a0 , c]  hOi> [?]
[O]hDihOip and M, [a, b]  hOi(hOi> [?]
[O]hDihOip).
Secondly, let us assume that M, [a, b]  hOi(hOi> [?]
[O]hDihOip) for an interval [a, b] in a model M .
That means that there exists an interval [c, d] such that [a, b]RO [c, d] and that (i) M, [c, d]  hOi>, and thus there exists a point e > d, and (ii) M, [c, d]  [O]hDihOip.
The interval [b, e] is such that [c, d]RO [b, e], and thus, by (ii), it satisfies hDihOip.
Therefore, there exists an interval [f, g] such that [b, e]RD [f, g], and a p-interval [h, i] with [f, g]RO [h, i].
Since h > b, we conclude that M, [a, b]  hLip.
hLip [?]
hBi[D]hBihDihBip.
Suppose that M, [a, b]  hLip for an interval [a, b] in a model M .
Thus, there exists an interval [c, d] in M such that b < c and M, [c, d]  p. It can be easily checked that [a, b]RB [a, c].
We show that [a, c] satisfies [D]hBihDihBip.
First, every interval [e, f ], with [a, c]RD [e, f ] is such that e < c. Let us consider the interval [e, d].
First, we observe that [e, f ]RB [e, d] holds.
Moreover, by the density of M , there exists a point d0 , with c < d0 < d, such that [e, d]RD [c, d0 ] holds and [c, d0 ] satisfies hBip.
Thus, M, [e, f ]  hBihDihBip, hence the thesis.
Now, suppose that M, [a, b]  hBi[D]hBihDihBip for an interval [a, b] in a model M .
That means that there exists a point c > b such that the interval [a, c] satisfies [D]hBihDihBip.
As a particular instance of the latter formula, every interval [e, f ] such that b < e < f < c (the existence of such an interval [e, f ] is guaranteed by the density of M ) must satisfy hBihDihBip which  *  *  means that there exists a point g > f such that M, [e, g]  hDihBip, which implies, in turn, the existence of two points h, i, with e < h < i < g, such that M, [h, i]  p. Since h > b, we have that M, [a, b]  hLip.
hLip [?]
hOi[E]hOihOip.
Suppose that M, [a, b]  hLip for an interval [a, b] in a model M .
Thus, there exists an interval [c, d] in M such that b < c and M, [c, d]  p. Consider the interval [a0 , c], with a < a0 < b (the existence of such a point a is guaranteed by the density of M ).
It holds that [a, b]RO [a0 , c].
We prove that M, [a0 , c]  [E]hOihOip.
Indeed, for every interval [e, c], with [a0 , c]RE [e, c], by the density of M , there exist a point f , with e < f < c, and a point g, with c < g < d, such that the interval [f, g] satisfies hOip as [f, g]RO [c, d].
Thus, M, [e, c]  hOihOip, M, [a0 , c]  [E]hOihOip, and M, [a, b]  hOi[E]hOihOip.
Now, suppose that M, [a, b]  hOi[E]hOihOip for an interval [a, b] in a model M .
That means that there exists an interval [c, d] such that [a, b]RO [c, d] and M, [c, d]  [E]hOihOip.
As a particular instance, the interval [e, d], for some e such that b < e < d (the existence of such a point e is guaranteed by the density of M ), satisfies hOihOip, that implies the existence of an interval [f, g], with f > e(> b), satisfying p. It immediately follows that M, [a, b]  hLip.
hLip [?]
hOi(hOi> [?]
[O]hBihOihOip).
Suppose that M, [a, b]  hLip for an interval [a, b] in a model M .
Thus, there exists an interval [c, d] in M such that b < c and M, [c, d]  p. Consider the interval [a0 , c], with a < a0 < b (the existence of such a point a is guaranteed by the density of M ).
This interval is such that [a, b]RO [a0 , c] and it satisfies: - hOi>, as [a0 , c]RO [b, d], and - [O]hBihOihOip, as every interval [e, f ], with [a0 , c]RO [e, f ], is such that e < c < f .
Thus, the interval [e, c] is such that [e, f ]RB [e, c], and, by the density of M , there exists an interval [g, h] such that [e, c]RO [g, h] and [g, h]RO [c, d].
This implies M, [e, c]  hOihOip, which, in turn, implies M, [a0 , c]  [O]hBihOihOip.
Hence, M, [a0 , c]  hOi> [?]
[O]hBihOihOip and M, [a, b]  hOi(hOi> [?]
[O]hBihOihOip).
Now, suppose that M, [a, b]  hOi(hOi> [?]
[O]hBihOihOip) for an interval [a, b] in a model M .
That means that there exists an interval [c, d] such that and that (i) [a, b]RO [c, d], (ii) M, [c, d]  hOi>, and thus there exists a point f > d, and (iii) M, [c, d]  [O]hBihOihOip.
By the density of M , there exists a point e, with b < e < d. The interval [e, f ] is such that [c, d]RO [e, f ], and thus, by item (iii) above, it satisfies hBihOihOip, which implies the existence of an interval [g, h], with g > e(> b), satisfying p. It immediately  *  follows that M, [a, b]  hLip.
hLip [?]
hOi[O][L]hOihOip.
Suppose that M, [a, b]  hLip for an interval [a, b] in a model M .
Thus, there exists an interval [c, d] in M such that b < c and M, [c, d]  p. Consider the interval [a0 , c], with a < a0 < b (the existence of such a point a is guaranteed by the density of M ).
This interval is such that [a, b]RO [a0 , c] and it satisfies [O][L]hOihOip.
Indeed, every interval [e, f ], with [a0 , c]RO [e, f ], is such that e < c. Thus, every interval [g, h], with [e, f ]RL [g, h], satisfies hOihOip (by the density of M , there exist g < i < h and c < j < d such that both [g, h]RO [i, j] and [i, j]RO [c, d] hold).
Thus, we have that M, [a0 , c]  [O][L]hOihOip, which implies M, [a, b]  hOi[O][L]hOihOip.
Now, suppose that M, [a, b]  hOi[O][L]hOihOip for an interval [a, b] in a model M .
That means that there exists an interval [c, d] such that [a, b]RO [c, d] and M, [c, d]  [O][L]hOihOip.
As a particular instance, by the density and the unboundedness of M , there exists an interval [e, f ], such that b < e < d < f and M, [e, f ]  [L]hOihOip, which, in its turn, together with the density assumption, implies the existence of an interval [g, h], with b < g < h < e, that satisfies hOihOip.
Thus, there exists an interval [i, j], with i > g(> b), which satisfies p. It immediately follows that M, [a, b]  hLip.
Last case of the proof of Lemma 2.
Proof: If -a < b and -a0 < b0 , then the following facts hold: (i) b > 0 (otherwise, -a < b <= 0 would hold, which implies a > 0 >= b, contradicting the fact that [a, b] is an interval), (ii) |b| = b (this follows directly from b > 0), and (iii) |a| < |b| (otherwise, |a| >= |b| = b would hold, which implies either a >= b, contradicting the fact that [a, b] is an interval, or -a >= b, contradicting the hypothesis that -a < b).
Now, we distinguish the following sub-cases.
* If X = O, then [c, d] is such that c < a < d < b.
We distinguish the cases below.
- If -c < d, then take some d0 and c0 such that |a0 | < d0 < |b0 | = b0 and -d0 < c0 < |a0 | = -c (the existence of points c0 , d0 is guaranteed by the density of R).
The interval [c0 , d0 ] is such that [a0 , b0 ]RO [c0 , d0 ] and [c, d]Z[c0 , d0 ].
- If -c = d, then take some d0 such that |a0 | < d0 < |b0 | = b0 and c0 = -d0 (the existence of such a point d0 is guaranteed by the density of R).
The interval [c0 , d0 ] is such that [a0 , b0 ]RO [c0 , d0 ] and [c, d]Z[c0 , d0 ].
- If -c > d, then take some d0 and c0 such that |a0 | < d0 < |b0 | = b0 and c0 < -d0 (the existence of points c0 , d0 is guaranteed by the density of R).
The interval [c0 , d0 ] is such that [a0 , b0 ]RO [c0 , d0 ] and [c, d]Z[c0 , d0 ].
*  *  *  If X = E, then [c, d] is such that c < a < b = d. We distinguish the following cases.
- If -c < d, then take d0 = b0 and some c0 such that -d0 < c0 < a0 (the existence of such a point c0 is guaranteed by the density of R).
The interval [c0 , d0 ] is such that [a0 , b0 ]RE [c0 , d0 ] and [c, d]Z[c0 , d0 ].
- If -c = d, then take d0 = b0 and c0 = -d0 (= -b0 < a0 ).
The interval [c0 , d0 ] is such that [a0 , b0 ]RE [c0 , d0 ] and [c, d]Z[c0 , d0 ].
- If -c > d, then take d0 = b0 and any c0 < -d0 (= -b0 < a0 ).
The interval [c0 , d0 ] is such that [a0 , b0 ]RE [c0 , d0 ] and [c, d]Z[c0 , d0 ].
If X = B, then [c, d] is such that a = c < b < d. Notice that -d < -b < a = c. Then, take c0 = a0 and any d0 > b0 .
It holds that c0 = a0 > -b0 > -d0 .
The interval [c0 , d0 ] is such that [a0 , b0 ]RB [c0 , d0 ] and [c, d]Z[c0 , d0 ].
If X = O, then [c, d] is such that a < c < b < d. Notice that -d < -b < a < c. Then, take some c0 such that a0 < c0 < b0 (the existence of such a point c0 is guaranteed by the density of R) and any d0 > b0 .
It holds that c0 > a0 > -b0 > -d0 .
The interval [c0 , d0 ] is such that [a0 , b0 ]RO [c0 , d0 ] and [c, d]Z[c0 , d0 ].
Proof of Lemma 3.
Proof: Let f 0 : {x [?]
R | x <= 1} - {x [?]
R | x <= 0} and f 00 : {x [?]
R | x > 1} - {x [?]
R | 0 < x < 1} be defined as f 0 (x) = x - 1 and f 00 (x) = 1 - x1 , respectively.
Clearly, f 0 and f 00 are bijective functions.
Moreover, it is easy to verify that f 0 and f 00 are such that (i) they are monotonically increasing and (ii) f 0 (x) < x (resp., f 00 (x) < x) for every x [?]
domf 0 (resp., x [?]
domf 00 ).
Observe that domf 0 and domf 00 (resp., codomf 0 and codomf 00 ) partition domf (resp, codomf ).
Clearly, f is well defined.
To verify that it is an injection, consider x, x0 [?]
R, with x 6= x0 .
If x, x0 <= 1 (resp., x, x0 > 1), it holds f (x) = f 0 (x) 6= f 0 (x0 ) = f (x0 ) (resp., f (x) = f 00 (x) 6= f 00 (x0 ) = f (x0 )), as f 0 (resp., f 00 ) is an injection; if x <= 1 and x0 > 1, then it holds f (x) = f 0 (x) 6= f 00 (x) = f (x0 ), as the codomains of f 0 and f 00 are disjoint sets.
Surjectivity of f follows from the surjectivity of f 0 and f 00 .
Thus f is bijection.
To prove that it is monotonically increasing, consider x, x0 [?]
R, with x < x0 .
If x, x0 <= 1 (resp., x, x0 > 1), it holds f (x) < f (x0 ), as f 0 (resp., f 00 ) is monotonically increasing; if x <= 1 and x0 > 1, then it holds f (x) < f (x0 ), as every element in the image of f 0 is less than every element in the image of f 00 .
Finally, from the fact that f 0 (x) < x for every x [?]
R, with x <= 1, and that f 00 (x) < x for every x [?]
R, with x > 1, it follows f (x) < x for every x [?]
R.