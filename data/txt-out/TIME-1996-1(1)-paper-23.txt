First Order Modal Temporal Logics with Generalized Intervals Gkrard Becher GREYC  -  CNRS URA  1526  Universitk de Caen F-14032 Caen Cedex email : becher@info.unicaen.fr  Abstract  The class of our temporal logics includes logics based on points, on standard intervals and on unions of convex intervals.
More precisely, we define a firstorder modal logic L ( S ) for each finite subset S of the positive integers fulfilling the following condition: all elements of S, except the element 1, must be even.
The modal operators in C(S) correspond to the ( p , 9)relations (where ( p , q ) E S x S) which are the elements of the interval algebra d(S)defined by GCrard Ligozat in [14].
Thus, formulae in L ( S ) are interpreted over a set of generalized intervals (also named p-intervals where p E S ) whose structure is described by the relations in A ( S ) .
In the particular case of L ( { 2 } ) ,we obtain for instance a first-order extension of Halpern and Shoham's propositional interval modal logic [8].
The plan of the paper is the following: in section 2, we recall the notions of generalized intervals and of interval algebras as defined by P. Ladkin and G. Ligozat, in section 3, we define the syntax and semantics of our logics.
A translation function into B T K , preserving satisfiability and validity, is given in section 4 and examples are proposed in section 5 .
Following the work of G. Ligozat who described the interval algebras d(S) whose elements are relations on generalized intervals, we propose a class of first order modal temporal logics where the possible worlds are points, standard intervals or unions of convex intervals and where the accessibility relations are elements of A ( S ) .
These logics have standard syntax and semantics with the unique exception that, whereas predicates are generally interpreted on intervals, the terms are always interpreted on points which are considered as elements of the intervals.
W e address also the problem of automated reasoning in such logics and define for that sake a satisfiability and validity preserving translation function into a standard two-sorted first order logic.
1 Introduction Bacchus, Tenenberg and Koomen proposed in [3] a standard two-sorted first-order logic, denoted B T I I , with temporal and non-temporal terms, subsuming a number of other logics.
The immediate advantages of such a logic are a clear semantics, a well-studied proof theory and a large degree of expressiveness.
However, we think that one has to pay for that expressiveness by a certain verbosity.
To see that, one may compare for instance the modal formula 4 in figure 4 with its translation into BTK given in section 5.
We present here a class of modal temporal logics which are, although less expressive than B T K , much more concise.
Indeed, whereas modal logics, due to their natural concision, are well suited for knowledge representation, standard first order logics have the advantage of well-known proof theories.
For that reason we define for the sake of reasoning a translation function from our logics into BTK preserving satisfiability and validity.
A sound and complete proof method in the target logic is given for instance in [5].
So, we cumulate advantages of concise languages and a standard proof theory in the target logic.
Although we assume that the reader is familiar with relation and interval algebras, we recall here the basic notions.
For more details, see [12], [13] and [14].
2.1 Relation Algebras Let A be an arbitrary set with three distinguished elements 0, 1 and l',let +, .
and ; be binary operations on A and let - and " be unary operations on A ; the structure A = ( A , +, -, 0, 1, ;, ", 1') is called a relation algebra with universe A if and only if s,  0  ( A , +, ., --, 0, 1) is a Boolean algebra  e  (z ; y ) ; z = 2 ; (y ; z ) for any 2 ,y, z E A  e z  170 0-8186-7528/96 $5.00 0 1996 IEEE  The Interval Algebras A ( S )  2  ; 1' = 1' ; 2 = 2 for every  2  EA  Labels  (01,  (111  (2)  b,  ltP,  Figure 1: The labeled elements of A ( l , 2 )  0  the formulas (x ; y) .
z = 0, (Z ; z ) .
y = 0 and (x ; 5) .
z = 0 are equivalent for any x,y,z E A  POI  and intervals: we say that a point x1 belongs to such a p-interval (511,. .
.
, yp) if either p = 1 and x1 = y1 or else there is an odd integer IC such that 1 5 k < p and  *  Yk  A relation algebra is proper if its universe is a set of binary relations on a set B (called the base of the algebra), and its operations coincide with usual settheoretic operations on these relations, in particular ; is the composition, "transposition and 1' the identity relation.
A representation of a relation algebra A is an isomorphism from A onto a proper relation algebra 23.
A partial ordering 5 is defined on the universe A of a relation algebra A by x 5 y iff x y = x.
An utom is a minimal nonzero element in that ordering.
An algebra is atomic iff every nonzero element has an atom below it.
Every finite algebra is atomic.
In order to determine an atomic relation algebra, it is sufficient to specify its atoms, the identity element 1' and the two operations ; and " .
Well-known examples of representable atomic relation algebras are the Point Algebra PA (with exactly 3 atoms) and the Interval Algebra IA (13 atoms corresponding to the 13 Allen's relations [l]).
Both are described in [12].
It is also proved there that the representations of PA and IA are unique up to isomorphism.
2.2  21  < Yk+l.
Relations between p-intervals and q-intervals, called (p,q)-relations, are defined in [14] as non decreasing sequences of p integers between 0 and 2q, where each odd integer occurs at most once'.
Such a relation  0 -  1  2  3  4  5  ...  29-1  Y3  ...  Yn  29  8  Y1  Y2  Figure 2: The regions determined by a q-interval.
indicates for each point zi (1 5 i 5 p) of the pinterval (21, .
.
.
, xp) the region of T containing this point.
There are 29 1 regions determined by the qinterval ( y ~.
,.
.
, yq) and numbered from 0 to 2q (figure 2), points which are less than y1 are in region 0, y1 is the unique point in region 1, points between yl and y2 are in region 2, and so on.. .
If S is any non empty subset of the positive integers, the set of all (p, q)-relations, where (p, q ) E S x S , is cadled IT(S).
One can find also in 1141 the definition of a transposition operation, globally defined on n[(S),of a composition operation defined on II(S) with values in P(rI(S))and of a unit element denoted 1's.
It is also proved that P(IT(S)),with its usual boolean structure and the above operations, is a representable atomic relation algebra A(S) with n(S) as set oE atoms.
It is a proper relation algebra if T is the set of rational numbers Q.Moreover, that proper algebra lis the unique (up to isomorphism) representation of A(S) on a denumerable base.
+  Interval algebras  GCrard Ligozat defines in [14] the notion of generalized intervals (or n-intervals) as increasing finite sequences of n points in some linear order T .
Points are 1-intervals, standard intervals are 2-intervals, 3intervals can be seen for example as a point preceding a classical interval, and so on.
Although the following results are proved by Ligozat for arbitrary pintervals, throughout this paper we restrict ourself to pintervals where p = 1 or p i s even.
Such generalized intervals correspond either to points or to non convex intervals in the sense of Ladkin [ll].
This restriction is necessary because we want to be able to define without any ambiguity the following relation between points  la different, although equivalent, definition can be found in ~31  171  For example A( 1) is the Point Algebra PA, d ( 2 ) the Interval Algebra IA, and A(1,2) is an algebra with 26 atoms expressing all possible relations between points and points, points and intervals, intervals and points or intervals and intervals.
For more convenience, we have labeled each element of A ( 1 , 2 ) in figure 1.
For instance, the relation labeled <p is the element (1,2) of II(2, l ) ,that is a relation between a 2-interval ( a , b ) and a point p .
This point determines three regions a  be nested and may occur in any position where an existential or universal quantifier may occur.
The following is an example of a formula in C(2) Vz Married(s)  1  b  Semantics  The semantics of L(S)is nearly a classical Kripke semantics except that the interpretation of a flexible function symbol is not constant over a world.
This is due to the fact that even if we consider a temporal logic where predicates range over intervals, it is not reasonable to interpret terms on intervals too.
What about the interpretation of the french President on the interval 1995 ?
Hence, we always require that terms are interpreted on points.
Formally, an interpretation I for C(S) is given by:  bp in A( 1, 2).
numbered 0, 1 and 2.
The left bound a of the 2interval is in region 1 (that is on p ) whereas the right one is in region 2 (figure 3).
Thus, the label <p recalls that ( a , b ) has p as beginning point.
In a symmetrical way, the relation labeled bp is a relation between a point p and a 2-interval ( a , b ) expressing that p is the beginning point of ( a , b ) .
3  BacheZor(s)  +  2  3.2 Figure 3: The relation  1  which says that if someone is married in the current interval of time io, then it will not be bachelor in every interval il such that io meets or precedes il.
Once again, the ( p , q)-relations in d ( 2 ) are labeled with symbols.
Thus the two relations m-for meets-and p-for precedes-are respectively the (2,2)-relations ( 0 , l ) and (0,O) in A(2) whereas the relation m p is their union.
c------.
0  +- [ m + p ]  Temporal Logic associated to A(S)  0  In this section, we define the syntax and semantics of a first order temporal modal logic, denoted L ( S ) , corresponding to a given relation algebra A(S), where S = (121, .
.
.
, n,.}
and for all i, 1 5 i 5 r , n, is either even or equal to 1.
Usually, modal logics are interpreted in a Kripke structure which is a set W of possible worlds structured by relations corresponding to the modal operators.
In C(S), these possible worlds will be n-intervals (where n E S ) and the relations will be those of A(S).
Hence, we denote these operators [z] or (z), where x E d(S).
One of the p-intervals (say WO) is distinguished as the current world in which all formulae are interpreted by default.
A formula like [.
](a means that Q, is true in all p-intervals 201 such that WO z 201.
Equivalently, (.
)(a means that there is at least one such p-interval in which Q, is true.
3.1 Syntax The syntax is that of a standard first order modal logic on a signature which is a set of symbols S = Uz=o,n(CrUCfU I I r UHf) where Cr and II: (resp.
Cf and IIf) are the sets of rigid (resp.
flexible) function and predicate symbols of arity i. Formulae of C(S)are classical first order modal logic formulae, constructed over the set of modal operators {[x],(x) I z E A ( S ) } .
Modal operators can  the canonical representation of d(S) with base Bs = U E S { (El,2 2 , .
.
.
I .p) E C P I 3 1 < 22 < *  0  0  0  0  0  * .< x p T  a non empty set D called the domain of I for every rigid function symbol f in EL a function f, : Dn c--) D for every rigid predicate symbol P in IIL a function : ~n -+ {0,1).
E  for every flexible function symbol f in EL a function : Q x ~n c--) D  E  for every - flexible predicate symbol in IIL a function FI : Bs x Dn I-+ ( 0 , l )  Given an interpretation I , a point t E Q and a valuation of the variables v , the interpretation of a term U with respect to I , t and v is denoted I I u ~ ~ " ~ " .
The truth value of a formula F (with respect to the interpretation I , a p-interval w and a valuation v ) is deduced from the truth values of its subformulae in the standard way.
For atomic formulae, we say that ( I ,w ,V ) P (u ~ ., .
, tin) iff for every point t which belongs to w, ~ ( l l u l l f ' t ' v ., .., I I u ~ ~ ~ " ~ ' ~=) 1 if P is rigid or I/ulll"t'Y,.
.
.
, I I u ~ ~ ~ " ~ ' ~= ) 1 if P is flexible.
E(",  172  It is noteworthy that all interpretations of a given language C(S) share the same canonical representation of d(S).
Moreover, a certain pinterval will be distinguished in the base Bs of d(S) as representing the current world, denoted by WO.
Both notions of consistency and validity will be relative to this current world.
take in account the theory which describes the structure of the underlying set of points.
This is why all proofs in the target logic are made with the theory CO of the linear ordering on the rationatl as background theory.
A resolution based proof method in the theory of dense linear ordering without endpoints can be found in [7] and 191.
There is also in [4] a more general work by Bachmair and Ganzinger inproving Hine's work.
Finally we describe in [SI and [6] a connection based proof method in the frame of the linear order theory which can be used for reasoning in the target logic.
Definition 3.1 Let L ( S ) be a language as described above, and let  WO  be a distinguished pinterval, where  p E S .
A formula F E ,C(S) is satisfiable iff there exists an interpretation I and a valuation v such that ( I ,W O , v) F .
F is valid iff ( I ,W O ,v) F for every interpretation I and valuation v.  4.1  There is no particular restriction about the choice of W O ,although we think that an ordinary 2-interval (if available) is the most natural one.
It can be noticed that the semantics of the formulae depends on this choice of WO.
For example, in ,C( 1,a), if WO is a 2interval, then a formula like [n]F,where T is a (1,l)relation, is semantically incorrect.
4  Translation  In this section we consider the problem of reasoning in a logic C ( S ) .
instead of developing complex direct methods, we prefer, in the spirit of [2] or [15], to translate the formulae of L ( S ) into a classical first order logic where we dispose of a variety of well-known proof methods.
For that sake, we use a traditional relational translation, expressing the accessibility relations between the possible worlds by first order predicates.
Ligozat indicates in [14]that the fact that a pinterval w = ( X I , .. .,xp)and a q-interval w' = (y1,.
.
.
, y p ) are in a (p,q)-relation R can be expressed by a formula E ( R ,w, w') where the predicates "=" and "<" are acting on the terms 21,. .
.
, xp,y1,.
.
.
, yp.
In the same spirit, we can write with these same predicates the formula B ( t , w) expressing that a point t belongs to a given p-interval W.  4.2  < 22  A 2 2 = yi A yi  Definition 4.1 If t is a temporal term (that is a rational or a temporal variable) and U is a term in a language C(S), we define t r ( t ,U ) recursively by: 0  0  0  < YZ  On the other hand, the fact that a point t belongs to a 4-interval w = (xi,xZrx3,x4) corresponds to the formula B ( t , 20) : 21  .< t < 22 v  x3  t r ( t ,x) = x if x is a variable t r ( t , f ( U l , * .
.
, % ) )= i f f is rigid t r ( t ,f ( % ,.
.
., U,)) if f is flexible  f(tT(t,Ul),...,tr(t,Un))  = f ( t ,t@, w ) ,.
, tr(4 Un)) ' *  In the previous definition, the first argument of the translation function is always a temporal point.By opposition, the translation function for formulae has a tuple of temporal terms (corresponding to a p-interval) as first argument.
Definition 4.2 Let w = ( t l ,.
.
.
,t P ) be a tuple of temporal terms (rational numbers or temporal variables), the function T r ( w ,F) where F is a formula of C(S) is recursively defined by:  <t < 24  Thus, all accessibility relations between the possible  0  T r ( w ,P(u1,.
.
.
, U , ) ) = V t B ( t , w)  + P ( t r ( t ,U I ) ,  .
.
.
,t r ( t ,tin)) if P is rigid and at least one flexible symbol occurs in the terms ~ 1. .
,.
, un.
worlds can be expressed in a first-order formalism with  aid of the predicates "=)' and  The translation function  We distinguish the translation function for terms and for formulae.
Exemple 4.1 The fact that a 2-interval w = ( 2 1 , x ~ ) meets a 2-interval w' = ( y l , yz) corresponds to the formula E ( m ,w, w'): 21  The target logic  It is a two-sorted first-order logic like that described in [3] with temporal terms and non-temporal terms.
In our case, temporal terms (terms of sort T ) are created by the translation and correspond to temporal points or bounds of the temporal intervals, whereas non- temporal terms (of sort U ) correspond to those which already exist in the source logic.
Eventually, there may be more than one non-temporal sort.
The arity of the symbols is not fixed, nor is the number of temporal subterms in a term.
More precisely, this means that the same predicate symbol may exist in the signature with a sort Tn x U" C ) Boo1 for different values of n.  "<".
Indeed one has to  173  [I1]  Vx  Bachelor(x)  [I1]  Vx  7  [1']M  VxVy  E + hJ 1  1  Bachelor(x)  Wed(a,y ) 1  + [qBachelor(x) + [d  Bachelor(x)  1  + [b](Bachelor(x)A  Bachelor(y))  Bachelor(president (franc.))
[f] 3 x 3 ~ ( i ) ( x= preszdent(frunce)) A Wed(x,y)  [i]  3y  Wed(presadent(france),y) Figure 4: Some formulae in C(1,2)  0  e  0  T r ( w , P ( u l, .
.
.
, U , ) ) = P(u1, .
.
.
,u n ) if P is rigid and only rigid symbols occur in the terms u 1 , .
.
.
, un.
whose domain is the disjoint sum of the domain of I and of the set Q of rational numbers.
The existing interpretation functions are left unchanged and the predicates "=" and " <" are interpreted respectively by equality and the strict ordering relation on Q.
For every formula F in C(S), for every q-interval w = ( 2 1 , .
.
.
, x q ) in Bs and for every valuation v , we prove that { I ,w, v} F iff {I',u[t1/x1,.. .
, t q / x q ] ) T r ( ( t 1 , .. .
, t q )F , ) where u [ t / x ]denotes the valuation of variables which is everywhere identical to U except for the variable t where v [ t / x ] ( t = ) x.
Thus, if we consider a satisfiable formula F in C ( S ) , by definition there will be an interpretation I and a valuation U such that ( I ,W O , v) F which is equivalent to (I', ~ [ ~ I / Y .I.
,.
,t q / y p l ) I= T r ( ( t 1 ,.
.
.
, t,), F ) where ( t l , .
.
.
,t P ) is a tuple of variables and W O = , y p ) is the current world.
Since the variables t l , .
.
.
, t, are free variables in T r ( ( t 1 , .. .
, t P )F, ) , this is equivalent to say that {I', v} T r ( ( y 1 , .. .
, y,), F).
Hence Tr(w0,F ) is 7-satisfiable.
In the other direction, if Tr(w0,F) is 7-satisfiable then there is a countable first-order interpretation I" whose temporal part is a model of '7- and a valuation U such that (P, v) Tr(w0,F).
Since all countable models of 7 are isomorphic, one can construct an interpretation I' with temporal domain Q and thus an interpretation I for L ( S ) satisfying F .
The remainder of the reasoning is as above.
The preservation of the validity is a simple consequence of the preservation of satisfiability and of the 0 fact that Tr(wo,-.F) = 1T r ( w o , F ) .
T r ( w ,P ( U 1 , .
.
.
, u n ) )= vt B ( t , w) -+ P ( t 1 , .
.
.
, t , , t r ( t , u l ) , .
.
.
, t r ( t , u , ) ) if P is flexible and at least one flexible symbol occurs in the terms u1,.
.
.
, un.
Tr(w, P(U1,.. .,U,)) = P ( t 1 , .
.
.
,t,, u1,.
.
.,U,) if P is flexible and only rigid symbols occur in the terms u1,.
.
.
, un.
0  T r ( w ,F A G ) = T r ( w ,F) A T r ( w ,G)  0  T r ( w ,1 P ) = i T r ( w ,F )  0  0  T r ( w ,[TIP)= v t i .
.
.Vth E ( T ,w ,20') -+ Tr(w', 8') where T is a ( p , q)-relation, t i , .
.
.
,th are q new variables and w'= (ti,.
.
.
,td) is a q-interval.
T r ( w ,( n ) F )= 3ti .
.
.3tb E ( n ,w ,w') A Tr(w', F) where T is a ( p , q)-relation, t i , .
.
.
, th are q new variables and w'= ( t i ,.
.
.
, t i ) is a q-interval.
Given a logic C(S),the result of the translation of a formula F of L ( S ) is the formula Tr(wo,F ) where WO is the current world.
P r o p o s i t i o n 4.1 Let F be a formula zn C(S).
F as satzsjiable (resp.
d a d ) af and only zf T r ( w 0 ,F ) zs 7satasjiable (resp.
7-valad) where 7 2s the theory of dense lanear order wathout endpoants.
Proof.
We indicate here the sketch of the proof.
The complete proof in the particular case of L(2,2) can be found in [6].
The generalization to C(S) is straightforward.
Given an interpretation I of C(S), we construct a first-order interpretation I' of the target language  5  An example  We consider here the language L ( l , 2 ) with 26 atomic modal operators corresponding to the 26 atoms in II(1,2) labeled as in figure 1.
In the example displayed in figure 4, we shall ab-  174  + + + f' + + +  breviate by l1 the relation p m o d" s" 1'I s d f 5 +h f i and consider that frunce is a rigid constant symbol whereas president is a flexible unary function symbol.
In C(1,2), it is possible to express the truth of a predicate on an interval as well as at a point.
For instance formulae (1) and (2) say that if the state "to be bachelor" is true (resp.
false) on an interval, then it true (resp.
false) at all of its internal points2.
This is the poznt-downward-hereditary property described in [16].
In formula (3), we say, supposing for sake of simplicity that we are in a rather rigid society, that if two persons get married, then both were bachelor at all points preceding strictly the instant of their union.
Notice that we consider here the wedding as a punctual event.
Next, we assert in formula (4) that until now, there was no bachelor President in France.
We can then deduce from these four formulae that no french President get ever married during his presidency (formula (5)).
However, this cannot be expressed in ,C(1,2) without the use of equality.
We let the reader check that the formula (6) cannot be deduced from formulae (1) to (4) because it is perhaps possible that a guy became President and wedded at the same instant.
As an example of translation, we give here the result of the translation of the formula 4,where we consider that the current world is the 2-interval ( 0 , l ) .
+ + + + + +  it is probable that a logic in which very short intervals can be distinguished from large intervals by some attribute would be even more suitable for natural langua,ge applications.
References J. F. Allen, Maintaining knowledge about temporal interval.
Communications of the A CM, Vol.
26(ll), pp.
832-843, 1983.
Y. Auffray and P. Enjalbert.
Modal theorem proving: an equational viewpoint.
Logic and Computatzon,Vol.
2(3), pp.
247-295, 1992.
F. Bacchus, J. Koomen, and J. Tenenberg.
A nonreified Temporal Logic.
Artzficial Intellzgence, Vol.
52, pp.
87-108, 1991.
L. Bachmair and H. Ganzinger.
Rewrite techniques for transitive relations.
Technical Report MPI-I-93249, Max-Planck-Institut fur Informatik, 1993.
Short version in Proc.
LICS'94.
G. Becher.
Cyclic Connections.
To appear in Proc.
of the Fifth Workshop on Theorem Proving wzth Analytic Tableaux and Related Methods, May 1996.
G. Becher.
De'monstration Automatique en Logique Temporelle et Algorithmes d'E- Unification Rigzde.
PhD thesis, UniversitC de Caen, 1995.
W. Bledsoe and L. Hines.
Variable Elimination and Chaining in a Resolution-based Prover for Inequalities.
In S. Verlag, editor, Proc.
5th Conference on Automated Deduction, pp.
70-87, Les Arcs, France, 1980.
Y. J. Halpern and Y. Shoham.
A Propositional Modal Logic of Time Intervals.
In Proceedings of the 1st IEEE Symposium on Logic In Computer Science, pp.
279-292.
Computer Society Press, 1986.
L. M. Hines.
Completeness of a Prover for Dense Linear Orders.
Journal of Automated Reasoning, Vol.
8, pp.
45-75, 1992.
B. J6nsson.
Boolean Algebras with Operators 11.
American J .
Mathematics, Vol.
74, pp.
127-162, 1952.
P. B. Ladkin.
Time Representation: A Taxonomy of Interval Relations.
In Proceedengs of AAAI-86, pp.
360-366, 1986.
P. B. Ladkin and R. D. Maddux.
On Binary Constraint Problems.
Journal of the ACM, May 1988.
G. Ligozat.
Weak Representations of Interval Algebras.
In Proceedings AAAI, pp.
715-720, 1990.
G. Ligoxat.
On Generalized Interval Calculi.
In Proceedzngs AAAI, pages 234-243, 1991.
H.-J.
Ohlbach.
Translation Methods for Non-Classical Logics: an Overview.
Bull.
of the IGPL, Vol.
1(1),pp.
69-89, 1993.
Y. Shoham.
Temporal Logics in AI: Semantical and Ontological Considerations.
Artificial Intelligence, Vol.
33, pp.
89-104, 1987.
< t 2 5 0 -+ (Vt ti < t < t 2 -+ -, Bachelor(t l ?t2, president( t , f r a m e ) ) ) Conclusion  QtlQt2 t i  6  We think that the logics proposed here are suitable for a large class of applications, including natural language applications.
Indeed, they are less expressive than full first order logic, but they are much more concise.
In fact, their expressiveness depends obviously on S. A reasonable choice would be for instance L ( l , 2 ) ,since it is then possible to assert the truth of predicates on standard 2-intervals as well as on points.
More sophisticated logics can be considered as well, but a concrete limitation will be the increasing number of modal operators.
However a number of problems are still remaining, in particular it is not possible in our logics to express that facts or events occur on a particular absolute date.
We are currently working on a possible extension, where suclh absolute dates would correspond to indexed modal operators.
An other challenging problem is the absence of the notion of size of the intervals: 2The relation  2  (for instde) is a relation between points and  2-intervals which is true if the point is inside the 2-interval.
b is the relation before between points.
175