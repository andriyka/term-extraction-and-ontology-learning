Reasoning with Sequences of Point Events* (An Extended Abstract) R. Wetprasit and A. Sattar  L. Khatib  School of Comp.
and Infor.
Tech.
Griffith University Nathan, Brisbane, 41 11 AUSTRALIA  Computer Science Program Florida Institute of Technology 150 W. University Blvd., Melbourne, F1.
32901, USA 2  Abstract We propose to model recurring events as multipoint events by extending Vilain and Kautz's point algebra [7].
We then propose an exact algorithm based on van Beek's exact algorithm) forfinding feasi le relations for multi-point event networks.
The complexity of our method is compared with previously known results both for recurring and non-recurring events.
We identify the special cases for which our multi-point based algorithm can find exact solution.
Finally, we summarise our paper with brief discussion on ongoing and future research.
A multi-point event (MPE) is a collection of points, when each point represents the related subevents.
A MPE is in normal form if all points are totally ordered, or the relation between the ith point to the i l t h point of the MPE is '<'.
Given two MPEs: I of size n and J of size m, R f I , J ) is the multi-point relation (MPR) between MPE I and J .
An element R(Ij,J j ) is a disjunction of point relation defined in point algebra [7] representing the relationship between the ith point of I and the j t h point of J .
For computational purpose, R ( I ,J ) is represented by using a A,,, matrix relation, when the rows of matrix represent the points of I and the columns represent the points of J .
Solving reasoning tasks for multi-point events in our framework is based on constraint satisfaction techniques.
A binary constraint network of k MPEs, each contains n point subevents, consists of le nodes where each node represents an individual MPE.
The domain of each node is a set of real numbers each representing a point subevent: Di = {aI,a?, ..., a, : aj < aj+l}.
The labels on the arcs are matrix relations representing constraints between two nodes.
An instantiation of a node is a k-tuple ( ~ 1 ~ x..,, 2 xk) , when zj E Dj.
The minimal label or the matrix of feasible relations between two MPEs is the matrix in which each element is consisting of all and only the feasible relations.
A scenario is a set of atomic relations between pairs of MPEs.
Each atomic relation corresponds to a matrix label for each arc.
6  1  +  Introduction  In this paper, we consider the events that are sequences of time points as multa-point events by extending Vilain and Kautz's point algebra.
Each multi-point event could be a finite sequence of recurring instantaneous actions, or a finite set of the beginning or ending of interval events that occur repeatedly.
It is straightforward to transform a multi-point event network into corresponding point algebra network.
We can then apply the existing PA algorithms to the reasoning tasks in questions.
Intuitively, we believe that reasoning with multi-point event networks should have better performance than the traditional PA network because computation on implicit relations of the same multipoint event could be omitted.
Even though, the non-convex interval model [3] can represent and reason about the recurring interval events, obtaining an exact solution for interval-based problem is a hard problem which requires exponential time algorithms [l, 31.
However, if the numbers of subintervals are known and we restrict the relations between subintervals to pointizable relations (SIA) [6], by translating to multi-point event networks, our algorithm computes the exact solutions for the original non-convex interval networks in polynomial time.
3  Reasoning with MPE Networks  The path-consistency checking for MPE network is done in two levels: between two MPEs and three MPEs.
The canonical form is defined to ensure pathconsistency between three points being in two different MPEs.
The path-consistency between three MPEs obtains from the compositzon operations over two matrix relations (defined in Section 3.2).
*A full version of this paper will appear in Proceedings of Canadian AI Conference 1996 (CSCSI-96).
36 0-8186-7528/96 $5.00 0 1996 IEEE  Multi-Point Events and Their Relations  3.1  Canonical Form  of four vertices called a forbadden subgraph.
We define the forbidden subgraph for MPE network in terms of points in MPEs as follow:  A matrix relation A,,, is said to be in the canonical form if the path-consistency conditions 51 among their neighbours as following are satisfied more detail of the algorithm for converting a matrix into the canonical form is in [3]):  t  1.
Ai,J-i  E A,,jo > ( V l 5 i 5 n, 1 < j 5 m )  2.
C > OAi,, ( V I 5 i < n , 1 5 j 5 m )  Definition 3 (A forbidden subgraph) Gwen a MPE subgraph of any four nodes: V , W , S , and T .
Let V be (Vi < ... < V, , W be < .. < Wn), S be (SI< ... < So), and d b e (Ti < ... < Tp),where m, n, o and p are the numbers of points in V,W ,5' and T respectauely.
The subgraph as called a forbidden MPE subgraph, af there exast v , w,s, and t , whach are any valid indices of V , W , S , and T , such that the followang condataons are satasjied:  3.
A;,j+l E A;,jo < (Vl 5 i 5 n, 1 5 j < m ) 4.
A ; - I , ~5 < oA;,j (V1 < i 5 n , 1 5 j 5 m )  R(V,,WW) R(V,,S,) R(W,,S,) R(V,,Tt) R(WW,Tt) R(S,,Tt)  These conditions could be used to approximate the path-consistency of the MPE network.
In our algorithm for finding feasible relations, we first transform the given matrices into canonical form.
This is to reduce the elements in the matrices and also maintain the path-consistency between two MPEs.
Lemma 1 Given a MPE network with IC MPEs (k 2 l), each contains n points (n 2 2).
The MPE network has a corresponding PA network.
3.2 Matrix Relations Operations The operations on two matrix relations, which are necessary in solving reasoning tasks, are defined by adopting the operations on constraint matrices from 41.
Table 1 defines the result of matrix operations $, @,*, 0,and') on two MPRs in terms of basic opX , -, 0 , erations in point algebra.
The symbols and correspond to union, intersection, complement, composition and inverse operators defined in PA, respectively.
+,  Complement Inverse ComDosition  = = = = =  '#;  '2 '2'  '<'  '7' -  '5'  The infeasible relation in the forbidden MPE subgraph is R(S,,Tt), which is '5'.This relation causes inconsistency among those four nodes.
However, if we don't allow '=' between S, and T,, the subgraph becomes 4-consistent [a].
If S is identical to T , the relation between S, and must be '<' because all MPEs are in normal form (either '<' or '>' allowed between points in MPE).
Thus, we don't need to take this case into consideration.
Similarly, we can show that other pairs of MPE nodes in the forbidden subgraph cannot be identical.
Therefore, the set of four MPE nodes considered as a forbidden subgraph are mutually different.
The following algorithm using the canonical form matrices and the matrix operations to solve the minimal label problem in polynomial time.
We found that we do not need to check the pathconsistency again after performing the procedure FIND-SUBGRAPHS-MPE since the network is still path-consistent.
Theorem 2 Suppose a MPE network has two nodes I and J.
Let A be the matrix relation between I and J. I f A is in canonical form, then the corresponding PA network is path-consistent.
i  =  Algorithm FEASIBLE-MPE Input: A MPE network represented as a matrix C where entry CIJ is the label on the arc from nodes I to J.
Each C I J is a matrix relation R [ I ,J],where an entry of R [ I ,J ] is an internal relation between points in MPEs I and J Output: The set of feasible relations for C I J , I , J = 1 , 2 , .., k begin PATH-CONSISTENCY-MPE FIND-SUBGRAPHS-MPE end  C = A" iff Ci,j = -Ai,i C = A iffci i = -Aji C = A 0B iff  Table 1: The Multi-Point Event Operations  Procedure PATH-CONSISTENCYXPE begin For each matrix relation R [ I ,J ] do Canonical-Conv (R[I, J1) Q := { ( I ,I(, J ) I 1 1 I-< k, 1 2 IS 5 k, K # I , J} While Q is not emDtv do selek and de1eie"a path ( I ,I(, J ) from Q  3.3 The Algorithm The algorithm to solve the minimal labels problem for MPE network is based on van Beek's exact algorithm for PA network [6].
He has shown that the pathconsistency algorithm alone is not sufficient for PA network by pointing out a counter-example consisting  j's  37  4  Temp := R[I, J ] 63 (R[I, I<]0 R[K, 51) If (Temp # R[I, J ] ) then Canonical-Conv(Temp) R[I, J ] := Temp R[J, I] := TLmp (inverse of Temp) Q := Q U RELATEDPATHS(I, J )  Conclusion  The main contribution of this framework is an extension of point-based representation to reason with the recurring events that are considered as collections of point subevents.
The algorithm we proposed correctly finds all feasible relations in the MPE network.
The complexity of this algorithm is O ( m a z ( n 5 k 3 , m n 2 k 2 ) where ), k is the number of MPEs with maximum n points and m is the number of 'f' internal relations in the network.
The complexity for finding the same solutions for non-recurring PA network with the same data (nk point events) is O(,max(n3k3,mn'k')), where m is also the number of # relations in the network [6].
For non-convex interval network, the minimal labels of the network can be approximately achieved in O(n5k3)complexity algorithm, or 0 n3k3) when considering only the affected relations [3 .
However, if we restrict the internal relations between subintervals to be pointizable interval relations (SIA) [6] and transform into MPE network, our algorithm yields the exact solutions.
The complexity of our algorithm is proportional to the number of '#' edges, the worst case would seldom occur in the real world domain.
Currently, we are working on improving Complexity of the algorithm we presented in this paper by avoiding the redundant computation of the unconstrained relations, and on constructing the algorithm for finding a consistent scenario for the MPE network.
We are implementing our algorithms and comparing the performance to other non-multi-point event approaches.
end  Procedure RELATED-PATHS/I.
J ) Return {(I, J , IC), ( K ,I , J ) ( 1 ' d K 6 k , I< # I, I< # J } Procedure FIND-SUB GRAPHS-MPE begin For each matrix relation such that R[V,W ] , = ' # I (1 5 V < W 5 k ) and (1 5 U ,w 5 n ) do Initialize P1, P 2 , P I Q1, Q2, Q to empty set For each MPE K (1 5 K 5 k , IC # V,W ) do P1 = P1 U adj-MPEs(>, Vu,IC) P 2 = P2 U a d j - M P E s ( 2 , W,, K ) Q1 = Q1 U adj-MPEs <, Vu,IC) Q2 = Q2 U adj-MPEs <, W,, K ) P =PlnP2, Q = QnnQ2 For each S, E P do For each Tt E Q do If S # T then R [ S , T ] , , ,:= ' < I R[T,S]t,,:= ( > I end  \  i  Our algorithm for computing feasible relations consists of two main tasks: checking path-consistency between three MPEs throughout the network (procedure PATH-CONSISTENCY-MPE), and eliminating the infeasible relations from the forbidden subgraphs (procedure FIND-SUBGRAPHS-MPE).
We maintain the consistency between two MPEs by calling procedure Canonical-Conv (detailed in [3]).
This procedure transforms the matrix relations into canonical form before inserting to the database.
Function a d j - M P E s ( L , V,, IC) in procedure FIND-SUBGRAPHS-MPE returns the set of elements I < k l in which R(Vu,I < k ) = '>' by checking the relations between V, and I - ,, (1 5 i 5 n ) .
Here are some technical results:  References J. Allen, "Maintaining Knowledge about Temporal Intervals," Communication of the A CM, Vol.
26:11, pp.
832-843, 1983.
E.C.
Freuder, "A Sufficient Condition for Backtrack-Free Search."
Journal of ACM.
Vol.
29, pp.
24-32, 1982.
L. al-Khatib, Reasonzng wath Non- Convex Tame Intervals.
PhD dissertation, Florida Institute of Technology, Melbourne, Florida.
1994.
P. Ladkin and R.D.
Maddux, "On Binary Constraint Problems."
Journal of ACM.
Vol.
41:3, pp.
435-409, 1994.
Lemma 4 Changzng the label R(Ss, Tt) of the forbadden subgraph defined an Definztaon 3 wall not lead to path znconszstency  A.K.
Mackworth, "Consistency in Networks of Relations."
Artzjkzal Intellagence.
Vol.
8 , pp.
99-118, 1 n-7  131 1 .
Theorem 5 The closure of a MPE network, calculated by the algorzthm FEASIBLE-MPE, corresponds to a path conszstent PA network  P. van Beek, Exact and Approximate Reasoning about Qualatataue Temporal Relations.
Technical Report TR-90-29, University of Alberta, Edmonton, Alberta, Canada.
1990.
Theorem 6 The algorathm FEASIBLE-MPE correctly finds the manzmal labels for all znternal relatzons an the MPE network.
M. Vilain and H. Kautz, "Constraint Propagation Algorithms for Temporal Reasoning."
Proceedings of AAAI-86, San Mateo; Morgan Kaufman.
1986.
Theorem 7 The algorathm FEASIBLE-MPE, for k MPE nodes an the constraant network and each node contaans at most n poants, has a tame complexaty of O ( m a x ( n 5 k 3m, n 2 k 2 ) ) where , there are m f-relataons.
38