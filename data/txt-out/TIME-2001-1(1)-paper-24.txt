Estimating Uncertain Relations between Indeterminate Temporal Points and Intervals Vladimir Ryabov Department of Computer Science and Information Systems, University of Jyvaskyla, 40351 Jyvaskyla, Finland vlad@lytko.jyu.fi primitives used by the majority of temporal formalisms.
In many practical situations temporal primitives are indeterminate, which means that we do not know exactly when a particular event, represented by the primitives, happened.
Indeterminacy can arise from different sources mentioned in [SI: granularity mismatch, clock measurements, dating techniques, uncertainty in planning.
Several other sources were suggested by Motro [lo] and Kwan et al.
[9].
In the situation of indeterminacy, a temporal point is defined within an interval of posisble values along with a probability mass function (p.mf.)
defining the probability distribution for these values.
An indeterminate temporal interval is represented as a pair of indeterminatetemporal points.
Often, there is a need to know the relation between two temporal primitives, for example, during query processing when we need to estimate the temporal relation between two events.
When the temporal primitives are indeterminate it is, in many cases, impossible to derive a certain relation between them.
Therefore, we need to find some way to handle uncertain temporal relations between indeterminate points and intervals.
We also assume that the measurements of the values of temporal points and intervals may include some measurement error, which needs to be taken into account during the estimation.
In this paper we propose an approach to represent and to estimate uncertain temporal relations between indeterminate points and intervals.
An uncertain relation between two points is represented by the three probabilities of the basic relations that can hold between these points.
Using the information about the endpoints of the intervals, within which the indeterminate points are defined, and taking into account the maximum value of the measurement error, we derive formulas for the extreme (the lower and the upper) probabilities of the basic relations between these indeterminate points.
The relation between two indeterminate temporal intervals is represented using the four relations between the endpoints of these intervals.
Using the formulas, proposed in [13], for the probabilities of Allen's relations [l], composed of the probabilities of the basic relations between the endpoints, we define formulas for the extreme  Abstract In many applications of temporal representation and reasoning formalisms there is a need to deal with temporal relations.
Many published approaches assume that the temporal information available is precise and certain, although in reality this is not always true.
Therefore, we need to j k d some way of handling impe@ect temporal information.
In this paper we propose one way to represent uncertain relations between indeterminate temporal points and intervals using a probabilistic approach.
An uncertain relation is estimated by calculating the probabilities of the basic relations (e,=,>for points, and Allen's relations for intervals).
We also assume that the measurements of temporal values can include some error, which needs to be taken into account when estimating an uncertain temporal relation.
We suppose that the maximum value of the measurement error is known.
Taking into account this error we calculate the extreme probability values of the basic relations between temporal primitives.
1.
Introduction Representation and reasoning about time is important in many applications area of AI, such as natural language understanding, planning, process control, and temporal databases.
Recent research in the area of temporal representation and reasoning has already achieved significant results, but there still exist topics, which require and deserve further research attention.
One such topic is supporting temporal formalisms with an ability to deal with uncertainty, as it was underlined in a recent survey by Chittaro and Montanari [3].
Many published approaches assume that the temporal information available is precise and certain, although in reality this is not always true.
Therefore, we need to find some way of handling imperfect temporal information.
Temporal points and intervals are the main ontological  0-7695-1 107401 $10.00 0 2001 EEE  69  probabilities of Allen's relations between two indeterminate intervals.
Many published research articles deal with imperfect information.
Various approaches to this problem are mentioned in the bibliography on uncertainty management by Dyreson [7], and in the survey by Parsons [ll], although not many of them consider temporal imperfection.
Formalisms intended for dealing with imperfection are often distinguished as symbolic and numerical.
Among the numerical approaches the most well known are probability theory, Dempster-Shafer's theory of evidence [141, possibility theory [5], and certainty factors [151.
Representation and reasoning with uncertain temporal relations between points was discussed by van Beek [17] and by van Beek and Cohen [18].
The notion of indefinite temporal relation, which is a disjunction of the basic relations was introduced: However, that representation did not include any numerical measures for uncertainty, mostly concentrating on the reasoning algorithms and the constraint satisfaction problem.
Moreover, temporal points were supposed to be determinate only, which rarely happens in practical applications.
Dyreson and Snodgrass [8] proposed a mechanism supporting valid-time indeterminacy in temporal databases, which can be seen as an extension of PDM [2].
They represent indeterminate temporal points similar to ourselves in this paper, although their main focus was on the development of a query language.
In the research area of integrating time and probability, there are a number of approaches introducing into temporal contexts mathematical formalisms such as Bayesian networks (i.e., [12]), and Markov processes (i.e., [16]).
In this paper we use a probabilistic approach to deal with uncertain temporal relations, although, there are several other means of handling uncertainty.
For example, Dubois and Prade [6] applied possibility theory to process fuzzy temporal knowledge.
The structure of this paper is as follows.
In Section 2 we present the main concepts used.
In Section 3 we calculate the lower and the upper probabilities of the basic relations between two indeterminate temporal points.
In Section 4 we estimate the probabilities of Allen's relations between two indeterminate temporal intervals.
In Section 5 we consider an example.
And, finally, in Section 6 we make conclusions.
isomorphic to natural numbers, i.e.
there is the notion that every point has a unique successor.
The time between two points is known as a temporal interval.
A chronon is an indivisible time interval of some fixed duration, which depends on the application.
A time line is represented by a sequence of chronons of identical duration.
Ontologically, a temporal point is located within only one chronon.
Definition 1 (Dyreson and Snodgrass [SI).
A temporal point is determinate when it is exactly known during which particular chronon it is located.
An indeterminate temporal point a[a'-a"] is defined within the closed interval [$,a*], where a' (the lower bound) is the first chronon of the interval [a',a"], a" (the upper bound) is the last chronon of the interval, and alla".
An indeterminate temporal point a is attached with the probability mass function (p.m.f.)
f(x) so, that f(x)=O when xea' or =a"; a"  f(x)E (0,l) and x f ( x ) = 1 where XE [a',a"].
x=a'  The requirement that the sum of the probabilities f(x) is equal to 11 results from the definition of our time ontology, according to which, a temporal point is located within exactly one particular chronon.
Generally, the p.m.f.
stems from the sources of indeterminacy [SI.When the granularity mismatch is the source of indeterminacy the uniform distribution is commonly assumed.
For example, if an event is known in the graniilarity of one hour then in a system with the granularity of one second the temporal point is indeterrminate, and we have no reason to favor any one second over another.
Some measurement techniques or instruments can also have fixed trends in measurements.
In some :situations,the analysis of past data can provide a hint to define the p.m.f.
For example, we may know that a particular type of event in a particular situation tends to occur during the last chronons of the interval.
Definition 2.
Let an indeterminate temporal interval A be defined as a pair of indeterminate temporal points s and e, specifying the start and the end of the interval A.
The starting point s from the interval [sI,s"] should be before the end point e which belongs to the interval [e',e"], so that the endpoints s and e do not overlap, i.e.
sueel.
The latter condition can be relaxed in some particular implementations, where an additional check of the consistency of the interval is provided.
There are three basic certain relations that can hold between two temporal points: "<" (before), ''=?
(at the same time), and ">" (after).
Definition 3.
Let the uncertain relation between two temporal points a and b be represented by an uncertainty vector (e',e=,e')a,b, where the value e:,b is the  2.
Basic concepts -The various models of time are often classified as discrete, dense, and continuous models.
We use the discrete model, which is commonly used in the field of temporal databases.
In the discrete time model temporal points are the main ontological primitives, which are  probabihty of a<b, the value  70  is the probability of  Figure 2 presents the situation when t=l.
Let us suppose further on that the value of the measurement error t corresponds to the shift of the interval [b',b"].
a=b, and the value is the probability of a>b.
The sum of these probability values is equal to 1 (i.e., e&, + e& + e&, =1) since they represent the probabilities of all the basic relations.
In some situations the measurements of the values of the indeterminate temporal points may include some measurement error, and, in this case, it is impossible to estimate the probabilities of the basic relations precisely.
Definition 4.
Let E- be the value of the maximum measurement error, expressed as a number of chronons, between the measurements of the values of two temporal points.
Then, the measurement error tE'E, where E =[-E,,,~,E,,,~].
Positive and negative values of t correspond to the shifts of the real measured value in two directions of the time axis, according to our ontology.
Let us suppose that, when t i s positive, the real value is shifted to the right direction on the time axis on the distance o f t chronons from the measured value.
When t is negative the shift is made to the left.
When t=O, we deal with the absolutely precise measurement, and the real value correspondsto the measured one.
In the next section we estimate the extreme probability values of the basic temporal relations between two indeterminatepoints.
*.
.,  *  .
.
.
:  1;  ...  ,.
, ,  .
c  Figure 2.
Pairs supporting "=" with t=l In Figure 2, there are 6 pairs of chronons supporting "=", although these pairs are different compared to the pairs from Figure 1.
This means, that to select the lower and the upper values of we need to consider separately the situations of all possible values o f t .
In each situation, we calculate the probability eib as a"  =~(f,(a)xf,(a+t)},wheret~E a=a'  Among the obtained values of e,,b we select the minimum and the maximum ones corresponding to the extreme probabilities of the relation "=":  3.
Relations between Points  Now, let us compose the extreme probabilities of the basic relation "4'.Again, let us consider, for example, the pairs consisting of the forth chronon within the interval [a',a"] and the chronons within [b',b"] supporting the relation "e".Figure 3 presents the situation when t=O.
The discussion in this section is based around two indeterminate temporal points aE [a',a"] and be [b',bu], attached with the p.m.f.s fi(a) and fz(b) correspondingly.
Let us suppose that the value of the maximum is'known.
The probability of a measurement error ,E, certain pair of temporal points a and b belonging to the intervals [a',a"] and [b',b"] correspondingly is fi(a)xfz(b).
Each pair of the values of the temporal points contributes to one of the three basic relations.
Taking into account different values o f t we derive the extreme probabilities of the basic relations between a and b.
Let us consider, for example, the pairs consisting of the chronons within the interval [a',a"] and the chronons within [b',b"] supporting the relation "=".
In Figure 1, when the measurement error t d , the joint probabilities of 7 pairs (shown with arrows) of chronons (shown with a stripe pattem) contribute to the probability el,b.
Figure 3.
Pairs supporting "c" with t=O In Figure 3, there are 7 pairs consisting of the fourth chronon within [a',a"] and the chronons within [b',b"] supporting the relation "4' with t=O.
In Figure 4, when t=l, there are 8 such pairs.
*... .... .
a' j. j  ..  .
I  :.
b' j.
..  .
,  .
.
:a":  i buj  time axis b  Figure 4.
Pairs supporting "<" with t=l  Figure 1.
Pairs supporting "=" with t=O  71  All the seven pairs from Figure 3 are explicitly present among the eight pairs from Figure 4.
The situation is the In a same when we increase the value of t up to E., similar way, we can reason about all other chronons within the interval A, This means, that the maximum number of the pairs, and, hence, the maximum value of e', is achieved when the value of the measurement error t is the biggest (E&.
Visa versa, the minimum value of e' is in the case, when t is the smallest (-&,-).
In the latter case, the intervals are shifted to the opposite direction.
Summing up the joint probabilities of the pairs of chronons within the two intervals contributing to the relation "<", we derive the probability of.
"c":  Figure!
5.
The relations between the endpoints  b"  Let the uncertain relation between two indeterminate intervals A and B be represented as a matrix %, where the relations rll, r12,r21, and 122 are as in Definition 3:  e.',, = g [ f l ( a ) x b=a+l+t z f 2 ( b ) } , where &E; a=a'  In a similar way, we can derive the probability of ">":  5{  Further in the text we will refer to a particular probability value from the matrix '3 as, for example, e, which stands for the probability value e= from the vector (e<,e=,e') within the matrix.
f, (b) x %fl (a)}, where t~ E;  {  e>,, = max e >,a bIt = -em,}  a=b+l+t  ; e>,, = min{ei,bIt = e,,}.
1 ' 1  In the next section we consider the representation and the estimation of- uncertain temporal relations between indeterminate intervals.
4.2:Probabilities of Allen's relations Using the probability values from the matrix %, we can derive the probabilities of Allen's relations between the intervals A and B.
The composition of the formulas of Allen's iinterval relations (Figure 6) takes into account the dependencies between the values of the relations rll, r12, rZl,and rz2, as it is shown in [13].
4.
Relations between Intervals In the first subsection we consider the representation of the temporal relation between two indeterminate intervals.
In the second subsection we propose formulas to calculate the extreme probabilities of Allen's relations between two indeterminate temporal intervals taking into account the value of the measurement error.
P(eq)=e,t e;,  4.1.
Representation of relations between.intervals .
There are two main approaches to represent the relation between two temporal intervals.
One approach is to use the thirteen interval relations proposed by -Allen [11: "equals" (eq), "before" (b), "after" (bi), "meets" (m), "met-by" (mi), "during" (d), "contains" (di), "overlaps" (o), "overlapped-by" (oi), "starts" (s), "started-by" (si), "finishes" (f), and "finished-by" (fi).
The second approach is to use four relations between the four endpoints of these intervals (Figure 5).
-In Figure 5 two indetenninate temporal intervals are denoted as A[sl,el] and B[sz,e~].Four relations rll, r12, rZl, and rz2 between the endpoints can take the values "c","=", and ">", It is convenient to represent the relation between A  P(b)=e:, e:,  P(bi)=e;, e:,  P(m)=e:,  P(mi)= e;1 e;  P(d)= e t e;z e;;  P(di)= e:, e&egz  P(o)= e;, ezl e;; P(si) = e&  P(oi)= e t e;; ez2 P(s)= eTl e;;- P(f) = e:1 e:, e;, P(fi)= e:, e:, eT2  Figure 6.
Probabilities of Allen's relations [13] Using the formulas from Figure 6 and the formulas for the extreme probability values of the three basic relations between two points from Section 3, we can compose formulas for the extreme probabilities of the thirteen Allen's relations between two indeterminate intervals.
Let us define a set of the four endpoints of the two intervals E{sl,el,s2,e2}.
Let PkE P, where kE { 1,2,3,4}.
In this case, for example, p3 stands for s2.Let @ b e a set of the four p.m.f.s for the endpoints, i.e.
@={fi(x),f2(x),f3(x), f4(x)}.Let fkE @, where kE {1,2,3,4}, be the p.m.f.
for the endpoint PkE I?
A relation rij, where i,jEUR { l,2}, stands for  72  the relation between the endpoints pic P and p j + 2f!~ For example, the probability e; is the probability of "="  5.
Example  between the endpoints p g Pand pj+2~ f!
Let us define the formulas for the probabilities of the three basic relations between the endpoints.
Using the formula for e' from Section 3 we derive:  Let us calculate the probabilities of Allen's relations between the indeterminate intervals A[ 10-15,17-221 and B[9-18,20-231, the relation between which was presented in Figure 5 (Section 4).
Let the values of E- be 0 (the precise estimation), 1, and 2.
Using the formulas in the previous section we can obtain the probabilities of Allen's relations for the three cases of ,E, (Table 1).
where pie P, fi,fj+2~ SP, i,jE { 1,2} and t E E In a similar way, we derive the formulas for the probabilities e; and e:.
Table 1.
Probabilities of Allen's relations Emax=O Emax=l Emax=2 relation P ~ , , P, P~ P,, PP, ea 0.01251 0.0125 0,008310.0167 0.00351 0.0167 0.0092 0.0092 0 0.0325 0 0.075 b 0 0 0 0 0 0 bi 0.0183 0.0183 0.0075 0.0325 0 0.05 m  I  I  I  where pi,pj+z~ P, fi,fj+2eSP, i,jE { 1,2}and te E The extreme probability values of Allen's relations are calculated using the formulas from Figure 6, where the probabilities e are calculated using the above formulas for e;, e;, and e;.
Let us compose, for example, the probabilities of the relation "equals".
According to Figure 6, P(eq)=e, e,.
Replacing the probabilities e t and e; with the correspondent joint probabilities of the pairs of chronons, we derive: P(eq) = E { f l ( S 1 ) x f,(s, + t,} x 5 { f 2 ( e 1 )x f,(e, + t)} sl=sl  Figure 6 illustrates the values of the lower and the = 1. upper probabilities for the case  9  e1=e;  where tE E The extreme values of the probability P(eq) can be selected after consideration of all the cases of different values oft.
as it was discussed in Section 3.
Therefore, P(eq)-  0.54  theupper probability value  0  0.48  = m=(P(eq)lt E E ] ,  0'36 0.24  and P(eq)min = min[ P(eq)lt E E] .
In a similar way, we can compose the probabilities of the other Allen's relations.
The exceptions are the relations "before" and "after", for which it is possible to predict the extreme values.
The extreme probability values of the relation "before", for example, are achieved when t takes the extreme values within E The value of P(b) is the maximum when t within the corresponding formula for P(b) is equal to E-, and it is the minimum when t=-&-.
For the relation "after" the situation is visa versa.
f  0.3  f  0.18  I 1  L-  the lower probability value  I Figure 6.
Probability values when$,E From Figure 6 it is easy to see which of Allen's relations are the most probable between A[10-15,17-22] and B[9-18,20-231 with the maximum measurement error equal to 1.
These are "overlaps" with the lower probability 0.2581 and the upper probability 0.5119, and "during" with the lower probability 0.2188 and the upper probability 0.2625.
73  [5] D. Dubois and H. Prade, Possibility Theory: an Approach to the Computerized Processing of Uncertainty, Plenum Pres!
;, New York, 1998.
[6] D. Ixlbois and H. Prade, "Processing Fuzzy Temporal Knowledge", IEEE Transactions on Systems, Man, and Cybtpmetics,Vo1.19(4), 1989, pp.729-744.
[7] C.E.
Dyreson, "A Bibliography on Uncertainty Management in Information Systems", in Uncertainty Management in Information Systems: From Needs to Solutions, Kluwer Academic Publishers, 1997, pp.415-458.
[8] C.E.
Dyreson and R.T. Snodgrass, "Supporting ValidTime Indeterminacy", ACM Transactions on Database Systems, Vo1.23(1), 1998, pp.1-57.
[9] S .
Kwan, F. Olken, and D. Roten, "Uncertain, Incomplete, and Inconsistent Data in Scientific and Statistical Databases", in Second Workshop on Uncertainty  6.
Conclusions In this paper we proposed an approach to estimate the probabilities of Allen's interval relations between two indeterminate intervals taking into account possible measurement error.
The extreme probabilities of Allen's relations are calculated using the information about the endpoints of the indeterminate intervals, the p.m.f.s for these endpoints, and the maximum value of the measurement error.
In the end of the paper we considered an example of calculations using different values of the measurement error.
The proposed approach has several limitations.
It is assumed that the values of the p.m.f.s for the endpoints are known, although this almost never happens in practical situations.
When the values of the p.m.f.s are unknown some particular means of determining the p.m.f., which were suggested, for example, by Dey and Sarkar [4] can be applied, or we can assume that the chronons within the interval for an indeterminate point are equally probable, as it is in the considered examples.
In the paper we used the discrete time model, which is the most widely used in many important applications of temporal formalisms, for example, in temporal databases.
Although, the presented formalism can be adopted for the continuous model.
This topic is considered as one possible direction for further research.
It is also planned to study the applicability of the proposed formalism in practical applications.
Management and Information Systems: from Needs to Solutions, Catalina, USA, 1993.
[lo] A. Motro, "Sources of Uncertainty in Information Systems", in Second Workshop on Uncertainty Management and Information Systems: from Needs to Solutions, Catalina, USA, 1993.
[ l l ] S .
Parsons, "Current Approaches to Handling Imperfect Information in Data and Knowledge Bases", IEEE Transactions on Knowledge and Data Engineering,  V01.8(3), 1996,pp.353-372.
[ 121 J. Pearl, "Probabilistic Reasoning in Intelligent Systems",  2-d Edition, Morgan Kaufmann, 1992.
V. Ryabov, "Uncertain Relations between Indeteminate Temporal Intervals", Proceedings of the IO-th Intemational Conference on Management of Data, R. Agrawal, K. Ramamritham, and T. Vijayaraman (eds.
), Tata McGraw Hill Publishing Company Limited, New Delhi, India, 2000, pp.87-95.
[14] G. !3hafer, A Mathematical Theory of Evidence, Princeton University Press, 1976.
[ 151 E. ShortlifTe, Computer-Based Medical Consultations: MYCIN, Elsevier, New York, 1976.
[16] A. Tawfk and E. Neufeld, "Irrelevance in Uncertain Temporal Reasoning", Proceedings of the 3-d [ 131  7.
Acknowledgements We are grateful to anonymous reviewers for useful comments.
This work was funded by COMAS graduate school at the University of Jyvkkyla.
8.
References  International Workshop on Temporal Representation and Reasoning (TIME'96), IEEE Computer Society Press,  [l] J.F.
men, "Maintaining Knowledge about Temporal Intervals", Communications of the ACM, Vo1.26, 1983, pp.832-843.
[2] D. Barbara, H. Garcia-Molina, and D. Porter, "The Management of Probabilistic Data", IEEE Transactions on Knowledge and Data Engineering, Vo1.4(5), 1992, pp.487-502.
[3] L. Chittaro and A. Montanari, "Temporal Representation and Reasoning in Artificial Intelligence: Issues and Approaches", Annals of Mathematics and Artificial Intelligence, Vo1.28,2000, pp.47-106.
[4] D. Dey and S .
Sarkar, "A Probabilistic Relational Model and Algebra", ACM Transactions on Database Systems, V01.21(3), 1996, pp.339-369.
1996, pp.
182-187.
[17] P. van Beek, "Exact and Approximate Reasoning about Qualitative Temporal Relations", Ph.D. thesis, Department of Computer Science, University of Waterloo, Canada, 1990.
[18] P. van Beek and R. Cohen, "Exact and Approximate Reasoning about Temporal Relations", Computational Intelligence, Vo1.6, 1990, pp.
132-144.
74