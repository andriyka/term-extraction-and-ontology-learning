A Hierarchy for Convex Relations Frank Schilder* Centrefor Cognitive Science University of Edinburgh, Scotland, U.K. schilderC!cogsci.ed.ac.uk  Abstract  However, the assumption that a sequence of two sentences normally indicates a temporal sequence of the described situations seems to be too strong.
(1) implies a sequential reading, because it seems to be reasonable that after entering a pub a beer will be ordered by the same agent.
Assume a context where Peter was thinking about the different things he spent money on; as in (3).
Here the situations are not necessarily interpreted as occurring in a particular temporal order.
This paper is concerned with a hierarchical representation of the convex relation algebra, which is a computationally tractable subset of Allen's interval calculus [ I , I I ] .
The hierarchy of convex relations is used to determine the minimal point relation constraints which hold between the end points of the intervals.
Nine convex relations are proven to be special, because they introduce new constraints.
One intended application of this hierarchy is a natural language discourse processing system.
A more precise speciJicationfor the temporal constraints derivable by the discourse grammar due to Lascarides and Asher is given 161.
(3)  Another constellation where only an underspeciJied relation is given is expressed in (4).
1.
Introduction  (4)  The proposed hierarchical ordering of temporal relations is used to cast more light on the set of possible temporal relations expressible by a narrative discourse.
Consider the following example sequence:  (1)  Peter entered the pub.
He ordered a beer.
The council built the bridge.
A local architect drew  the plan.
In (2) the knowledge about the subparts of building a bridge overrides the first default and a subset relation is inferred.
'The author's new contact address: Computer Science Department, Hamburg Univer.rity, Wgt-Kiilln-Sa 30, 0-22527 Hamburg, Germany.
(5)  schilder@informatik.uni-hamburg.de  0-8186-7937-9/97$10.00 0 1997 IEEE  Mary walked along the beach.
The seagulls shrieked.
She was quiet and happy.
Several temporal relations can be expressed by this discourse when we try to pinpoint the exact temporal constellation between the described situations.
It is conceivable that the walk lasted as long as the other two situations, but it is also imaginable that the shrieking of the seagulls lasted longer than the other two.
Another scenario which is possible could lead to the assumption that the last situation may have started after the beginning of the two other ones.
If we wanted to spell out every possible combination, we would find 10 relations which hold between each of these two situations.
It is easily to see that the complexity explodes, the more situations are described by a discourse.
Approaches to the representation of temporal relations offer either an underspecified temporal relation (i.e.
an "overlap" relation as used by 161) or a specific temporal relation, referring to the overlap relation defined by Allen's interval calculus (cf.
[ 101).
The former approach grasps the underspecification especially for this constellation described in (4), but it is not capable of representing a stricter temporal relation, if this is required, as in the following example:  This sequence is normally interpreted as a sequential occurrence of the described situations.
Lascarides and Asher, for instance, propose a default reasoning system to grasp the default that two situations described by two subsequent sentences are temporally ordered sequentially [6].
Only if other knowledge conflicts with this default will a different relation be assumed: (2)  He bought the bus ticket.
He bought a beer.
He didn't understand where all his money could have gone.
86  Peter entered the pub.
The music was quite noisy.
In this example, we do not have the freedom to assume a set of possible different relations.
It is quite clear that the situation described by the second sentence temporally includes the situation of entering the pub.
Consider another example where the number of relations can be reduced, if we take world knowledge about breaking valuable items into account:  (6)  Hence a temporal reasoning system must express the-coarse knowledge as well as fine interval relations.
Within the original interval calculus, the representation of coarse knowledge could only be expressed by the disjunction of the interval relations (e.g.
11{b V m V o V s V d} 12).
Moreover, the algorithm for testing the consistency of the stored temporal relations is proven to be NP-hard in the full algebra ([ 141).
Therefore sub-algebras have been investigated and more efficient reasoning algorithms have been proposed ([ 15, 1 21).
Peter broke the china vase.
Mary was angry.
The only way we can interpret this sequence is that Mary got angry after Peter broke the vase.
Summing up, I assume at first a totally underspecified temporal relation which further context and world knowledge can narrow down, as in (1), (2), (4), (5) and (6) .
Discourses which support the inference of an unordered list reading can only provide this totally underspecified relation, as in (3) (note that subsequent discourse may specify this further).
The following section introduces Allen's interval calculus and the subset of convex relations.
Section 3 shows how the 82 convex relations can be ordered in a hierarchy.
I will furthermore show how the 13 fine Allen relations can be described by the minimal set of point relations.
Section 4 extends the discourse grammar described by [6] with this more fine-grained time logic to cover the data discussed in this section.
2.2.
Sub-algebras Sub-algebras have been developed to restrict the complexity of the full interval algebra, which allows 2"=8 192 relations.
(This includes the fully unspecified relation of all 13 fine interval relations (i.e.
T) and the null relation (i.e.
I)).
The maximal tractable subset of the full algebra was identified by [7].
This subset covers 868 elements and it was shown that the computing of the consistency of this so-called ORD-horn subclass is a polynomial-time problem (assuming P # NP).
Another prominent sub-algebra is the point algebra [15], which is a strict subset of the ORDhorn algebra.
This sub-algebra still contains 188 relations.
In the following, I will focus on a further subclass of the point algebra: the convex relation algebra, which allows 82 relations (See [ 111 and [ 131 for a compilation of recently developed algorithms).
2.
Allen's interval calculus and convex relations  2.3.
Convex relations  A standard formalism for the representation of temporal knowledge, often used in AI projects, was proposed by James Allen [I].
His calculus is based on intervals and describes all 13 possible relations between intervals (s. figure 1).
The following section will briefly discuss the problems that can arise when coarse temporal knowledge is represented with Allen's interval calculus.
Section 2.2 summarises the findings with respect to the investigations of some subalgebras and section 2.3 gives the definition of the convex relation algebra.
The sub-algebra of the convex relations has been widely investigated and used for different AI systems [4, 15, 12,8, 51.
I will repeat here the definition of the algebra, as in [4].
The convex relation algebra is a further subset of the point algebra proposed by [ 151.
Sets of interval relations are described by the point relations (i.e.
{<,=, >}) between the beginning and end points of the intervals (i.e.
a and w).
The definition of convex relations The point algebra is defined by the four relations R I to R4 between the beginning (ai)and end (ai)points of the two intervals 11and 12 in question (i.e.
alRla2, O I R ~ Q , ~ I R ~andQwlRaa-2).
See figure 2 for a graphical representation of the required relations for this algebra.
In order to describe a convex relation the following relation-sets are allowed: { <} { =}, { >}, { <,=}, {=,>},{<,=,>} (In the following I will use the abbreviations < ,=, > ,I, 2 ,# , '?
for the point-relations { <}, {=}, { >}, { <, =}, {=, >}, { <, >} and { <,=, >I).
A convex relation evolves when each of the four relations R I to R4 are assigned to one of those 6 point relations.
An  2.1.
Coarse knowledge An investigation of the representation of coarse knowledge is necessary, especially when considering the temporal reasoning system as an application for an intended discourse processing system.
My investigation of discourse sequences reveals that the temporal relations which are expressed in a narrative discourse are mainly underspecified and vague.
It is furthermore often the case that contextual information, world knowledge and the like can narrow down the possible temporal relations between situations.
~  87  Relation  Symbol  Inverse  x before y  b  a  x meets y  m  mi  Meaning  Y  X  Y  X  X  x overlaps y  oi  0  Y  X  x starts y  S  si  x during y  d  di  Y  X  t------l  Y  X  x finishes y  f  fi  Y  X  x equal y  eq  t--------l  eq  Y  Figure 1: The 13 interval relations  interesting structure can be found if we order the 13 strict relations according to the possible point relations (see table 1).
This structure can be put into a neat graphical representation (see figure 3).
The term convex can now be explained with the help of this diagram.
A convex relation has to have a top (i.e.
q )and a bottom element (i.e.
r l ) such that Re1 = { r l q C r C r2).
Definition 1 (Convex Relation) A temporal relation Re1 between two intervals 11 and 12 can be described by the four point-relations R{ 4}, where R, is one of  It should be stressed that the point relation set # is excluded in this sub-algebra.
Note that therefore the disjunction of the two interval relations b e f o r e and a f t e r (i.e.
{ b e f o r e V a f t e r } ) cannot be represented by this algebra.
The point-relation set # would be required for describing this interval relations set.
The representation in 3 is furthermore used by Freksa  However, bear in mind that the choice of the point relation for Rj is not totally arbitrary, since the relations R I to R4 can also be derived via composition of the remaining relations and the preset <-relation between the beginning and end points of each of the two intervals 11 and 12.
(cf.
figure 2).
It is therefore necessary to ensure that only well-formed relations are constructed.
The following definition shows how well-formedness can be achieved for the 82 convex relations:  0  for an iconic representation of the relations ([3]).
reflects the structure of the ordering in figure 3.
The dots represent  0  Definition 2 (Well-Formedness) A temporal relation Re1 between two intervals 11 and 12 is well-formed, if every point-relation between ai and mi (fori = 1 2) is the same or more definite as every other composed relation with respect to transitivity.
the possible interval relations.
For example, describes the two interval relations b e f o r e and meets.
I will use this iconic representation throughout the rest of the paper.
The formal definition of a convex relation is as follows  88  I I R4  Table 1: The convex relation algebra (a, is the beginning and col the ending of 11)  <  Table 2: The compose operation for point relations check the transitive closure for all 4-tuples which can be generated according to the definitions I and 2.
<  3.
The hierarchy Figure 2: The four point relations, which hold between the end point of two intervals  To find out which point-relations constrain which convex relations, I put the 82 convex relations in a hierarchical order.
By doing this, I was able to show that merely 20 relations introduce constraints for one point relation only.
A few more words are needed to show how this wellformedness can be computed for the convex relations.
First of all the definite-relation (-&,) between point relations has to be defined which can easily be done using the subset relation for the point relation sets.
Hence the < relation is more definite than the 5 relation, because of { <}  So, for example, the relation o l d e r ( $.)
is sufficiently described by only one point relation, namely al < a2 (i.e.
R I G <).
Taking the symmetry of the hierarchy into account, only 10 distinct relations need to be considered.
If you furthermore take into account that the =-relation is introduced via a cross of two underspecified point relations, only 9 relations remain.
The following section explains the way I ordered the 82 convex relations and why certain relations stand out, introducing point constraints.
Section 3.2 discusses the findings  {<,=I.
Secondly, the compose operation for the point relations  (a),which is necessary for determining the transitive closure, can be looked up in table 2 (e.g.
P I 5 p2 A p 2 = p3 -b PI 5 P3).
We can now determine all 82 convex relations, if we  89  t.9 I  Figure 4: A part of the hierarchy  @ I  there are 10 genuine ones.
This number can be further reduced by one, because the = relation for R I and R2 is derived by 2 n 5.
The hierarchy furthermore reflects the fact that particular relations can be concluded from others.
If the relation R2, for example, is given as 01 5 02, the relation R3 has to be < (i.e.
a1 < 02).
This can be proven via the transitive constraints which hold for the convex relations or via the hierarchical structure presented here.
Figure 3: The convex relations diagram  with respect to the minimal point relation sets, which can now easily be derived from the hierarchy.
3.2.
Minimal point relation sets As was just shown, sometimes only one point relation is sufficient to determine the complete 4-tuple of the convex relation (e.g.
R4 5 ) .
Interestingly enough, the 13 fine Allen relations cannot always be derived in such a concise way.
Only before, a f t e r , meets and m e e t s i n v e r s e can be determined via only one point relation constraint.
Freksa claims that "in no case, more than two relations between beginnings and endings of events must be known for uniquely identifying the relation between the corresponding events."'
Although this is true for most of the fine relations, it has to be stressed that for the interval relation o v e r l a p s three point relations are required (cf.
table 3).
The fact that the required relation R4 E > for o v e r l a p s cannot be inferred from the relations R I and R2 is reflected by the full hierarchy in figure 5.
The relation constraint R4 5 > does not stand above one of the other three constraints, while the f i n i s h - i n v e r s e relation, for instance, possesses R2 I = which is subsumed by R4 z >.
3.1.
Building up the hierarchy The hierarchy's top element is the fully unspecified temporal relation (i.e.
T), since this relations subsumes all other convex relations.
On the following level two relations which each allow 12 different interval relations can be found (cf.
figure 5).
The construction of the hierarchy proceeds in the same way until the 13 fine interval relations are reached, which all subsume the null relation (i.e.
I).
Figure 4 shows a part of the hierarchy.
As can be seen in this figure, certain relations have only one immediate ancestor in the hierarchy (i.e.
encircled in the figure).
These relations introduce new constraints with respect to the point relations, whereas the other relations are defined via a cross between two relations.
There is only one exception, as the full hierarchy in figure 5 shows: the = relation for R I and R2 is introduced via a cross between the 2 and 5 constraints.
To sum up, 20 relations were found which impose new constraints, considering the symmetry of the hierarchy  My emphasis.
90  Consequently, only this constraint is needed to derive the R4 >.
Table 3 shows the minimal point relations as shadowed.
The hierarchy of the 82 convex relations can be used to derive the constraints which are required for determining the remaining coarse temporal relations.
I would like to emphasise that only a small set of relations are constrained by only one point relation.
As can easily be seen in the hierarchy in figure 5, the other relations can be described via a cross between two relations which are on a higher level of the hierarchy.
This convex relation is called contemporary of and is equivalent to the "overlap" relation used by [6].
Interestingly enough, a stricter relation set can be derived if an event and a state sequence is given, as in (10): (10)  The convex relation is called survived by & contemporary of and constrained by these point constraints: R2 < A R4 E > Note that this is a more accurate temporal relation for this kind of discourse relation (i.e.
background) as given by Lascarides and Asher, using the hierarchy for convex relations introduced in the previous section.
The last example discourse where a fine Allen relation can be found is repeated here as ( 1 I ):  4.
Temporal constraints in a narrative The presented hierarchy can be used for deriving the temporal relations in a discourse processing system.
It provides a way of representing the temporal relation more precisely and succinctly as former approaches did.
Following Lascarides and Asher, I assume that so-called rhetorical relations are necessary to establish a coherent discourse.
Taking world and context knowledge into account, this information can be derived via a non-monotonic reasoning system [6,2].
However, in contrast to their approach I stipulate a totally underspecified temporal relation holding between the described situations.
World and context knowledge interacts with the temporal reasoning system in such a way that this relations can be narrowed down by imposing further constraints (for more details see [9]).
Reconsider (7):  (7)  (1 1)  (12)  He bought the bus ticket.
He bought a beer.
He didn't understand where all his money could have gone.
To sum up, the point relation constraints were used to describe the temporal relations in a concise way.
Coarse relations as well as fine relations can be represented by the formalism, as required by the discourse sequences discussed.
The used rhetorical relations and the associated temporal constraints are listed in table 4.
Peter entered the pub.
He ordered a beer.
(7).
5.
Conclusion  On the other hand, an elaboration relation holds for (8):  In this paper I have shown how the 82 convex relations can be ordered in a hierarchical structure.
I extracted 9 convex relations which impose new point relations on the hierarchy.
I furthermore presented the minimal point relation sets for the 13 fine relations.
It turned out that the overlap and overlapinverse relations need at least 3 point relations, whereas the other relations can be described by one or two point relations.
A possible application of the hierarchy is a narrative discourse processing system.
Assuming at first a totally underspecified temporal relation, further point relation constraints can be imposed on the interval relation as contextual information is added or reasoning from world knowledge occur.
This approach avoids the overriding of default  The council built the bridge.
A local architect drew the plan.
The associated point relation constraints for this rhetorical relation are R2 E 2 A R I E 5 which determines the convex relation called superset.
The occurrence of two (or more) states like in (9) allows the derivation of a so-called scenesetting relation which imposes the following point constraints: R3 < A R4 E >.
This is a more general background relation which I have added to the set of rhetorical relations proposed in [6].
(9)  Peter broke the china vase.
Mary was angry.
We can obtain a cause relation from our world knowledge and the derived rhetorical relation result imposes the meets relation which holds for this sequence of two situations.
The point constraint is: R4 E =.
Finally, a list relation does not impose any temporal constraints, so that only the fully underspecified top element of the hierarchy can be derived for a constellation like in (12):  A narration relation has to be derived for this sequence which leads to the followingpoint relation constraint: R4 f <.
Consequently a fine relation (i.e.
before) is derived for  (8)  Peter entered the pub.
The music was quite noisy.
Mary walked along the beach.
The seagulls shrieked.
She was quiet and happy.
91  I  Fine Relation  11  Point Constraints  )I Inverse Relation 11  Point Constraints  1  Table 3: The 13 fine relations and their point constraints  I rhet.
relation 11  convex relation  I icon  two anonymous reviewers of this paper.
This research was partly supported by a PhD-scholarship HSPIUAUFE awarded by the German Academic Exchange Service (DAAD).
References [I] James F. Allen.
Towards a general theory of action and time.
Artificial liztelligeim, 23: 123-1 54, 1984.  scenesettirig  contemporary of (ct)  background  survived by & contemporary of (bc)  [2] N. Asher and M. Morreau.
What some generic sentences mean.
In Hans Kamp, editor, Dqfnult Logics for Linguistic Analysis, number R.2.5.B in DYANA Deliverable, pages 5-32.
Centre for Cognitive Science, Edinburgh, Scotland, 1991.
(b  9  [3] Christian Freksa.
Temporal Reasoning Based on SemiIntervals.
Artificial Intelligeizce, 54: 199-227, 1992.
[4] Siegfried Gunther.
Zur Reprasentation temporaler Beziehungen in SRL.
KIT-Report 21, Technische Universitat Berlin, Berlin, 1984.
A temporal extension of Prolog.
Journal ofLogic PI-ogr-uinining, 15: 1 13-1 45, 1993.
[5] Tomas Hrycej.
Table 4: The rhetorical relations and the temporal constraints  The  [6] Alex Lascarides and Nicholas Asher.
Temporal interpretation, discourse structure and commonsense entailment.
Linguistics and Pliilosopli~i,16:437-493, 1993.  assumptions and furthermore allows a more adequate representation of the expressed temporal relations.
Generally speaking this hierarchy can be used for applications where at first only uncertain and vague temporal knowledge is available in the domain.
However, if more specific information can be derived, the temporal relation will be narrowed down.
It is also important to stress that at any time a temporal relation can be given which does not stand in contradiction with the possibly more precise final result.
[7] Bemd Nebel and Hans-Jurgen Burckert.
Reasoning about temporal relations: A maximal tractable subclass of Allen's interval algebra.
DFKI Research Report RR-9311, German Research Center for Artificial Intelligence (DFKI), Saarbrucken, Feb. 1993.
[SI Klaus Nokel.
Ternporullj~DistriDutecl Symptoms in Tech nical Diagnosis.Springer-Verlag, Berlin, 199 1.
[9] Frank Schilder.
Teiizpoinl Relations in English and German Narrutive Discourse.
Ph.D. thesis, Edinburgh University, Centre for Cognitive Science, 1997. in preparation.
Acknowledgement  [IO] Fei Song and Robin Cohen.
The interpretation of temporal relations in narrative.
In PI-oc.
of AAAI-88, pages 745750, St. Paul, MN, August 1988.
American Association for Artificial Intelligence.
The author gratefully acknowledges the helpful comments of Sheila Glasbey, Lex Holt, Karin Verspoor and the  92  R4(=) R4(c)  R3(>) R3(=)  Figure 5: The full hierarchy of the 82 convex relations  Peter van Beek.
Approximation algorithms for temporal reasoning.
In Proc.
of the I lthInternational Joint Conference on ArtiJicial Intelligence, pages 129 1-1 296, Detroit, MI, August 1989.
Morgan Kaufmann.
Peter van Beek.
Reasoning about qualitative temporal information.
Artificiul Intelligence, 58:297-326, 1992.
Peter van Beek and Dennis W. Manchak.
The design and experimental analysis of algorithms for the temporal reasoning.
Joiirnal qf Art$cial Intelligence Research, 4: 1-1 8, 1996.
Marc B. Wain and Henry A. Kautz.
Constraint propagation algorithms for temporal reasoning.
In Proc.
of AAAI86, pages 377-382, Philadelphia, PA, 1986.
American Association for Artificial Intelligence.
Marc B. Wain, Henry A. Kautz, and Peter van Beek.
Constraint propagation algorithms: A revised report.
In D. S. Weld and J. de Kleer, editors, Qualitative Reasoning about Physical Systems, pages 373-38 1.
Morgan Kaufman, San Mateo CA, 1990.
93