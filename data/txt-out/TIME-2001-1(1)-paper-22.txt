Qualitative Temporal Representation and Reasoning about Points, Intervals and Durations Silvana Badaloni University of Padova Dept.
of Electronics and Computer Science Via Gradenigo 6A - 35 100 Padova - Italy badaloni@ladseb.pd.cnr.it  Massimiliano Giacomin University of Brescia Dept.
of Electronics and Automation Via Branze 38 - 25123 Brescia - Italy giacomin@ing.unibs.it  Claudio Masolo University of Padova Dept.
of Electronics and Computer Science Via Gradenigo 6A - 35 100 Padova - Italy masolo@ladseb.pd.cnr.it  Abstract  of the network [7].
In the same line, there are other binetwork based works proposed for representing information about durations, PDN [7] and APDN [12].
PDN is a point duration network defined as a structure formed by two point-algebra networks separately but not independently, as ternary constraints are introduced for relating point and duration information.
APDN extends PDN where only qualitative information is considered, by representing both qualitative and quantitative information about point events.
Like other point-based approaches, they do not handle the disjointedness of interval algebra.
Recently, an elegant framework called ZNVU [S] has been proposed for representing qualitative information about time intervals and durations.
ZNDU is a single network, therefore it avoids typical problems of bi-networks, and in addition it has interesting computationalproperties.
In this papel; we extend ZNVU in two directions: we enrich its expressive power introducing points and maintaining the same computational properties, and we provide it with an axiomatic theory able to handle qualitative temporal information about points, intervals and durations in a unified framework.
This theory is based on general interval entities and two relations: general meets and not longer than.
The PIDN framework [9] considers a single network able to handle both qualitative and quantitative temporal informations about points, intervals and durations, but its high expressive power is achieved at the price of its computational properties.
Recently, an elegant subframework of PIDN called ZNVU [8] has been proposed.
ZNDU represents only qualitative information about time intervals and durations and it has interesting computational properties.
The set of interval relations considered is an extension of 13 Allen's relations [11 integrated with qualitative information about durations {<, =, >}.
For example, the relation b is extended to the three relations { b < , b=, b'}, while other relations such as {eq, s, si, d , d i , f , f i } which include implicit information about interval durations, are left unchanged.
Then, 25 basic relations between pairs of intervals are considered.
The ZNVU -network exhibits similar characteristics as the IA-network concerning tractable subclasses (Convex as well as Pre-convex).
But the level of local consistency to achieve global consistency is 4-consistency in-  1.
Introduction In many domains, it is more important to consider the relative information concerning the durations of two temporal intervals instead of considering the absolute knowledge about a single interval.
If durations are taken as distances between endpoints of intervals then qualitative constraints as "the duration of the interval Z is shorter than the duration of the interval J" cannot be represented in a binary constraint network since they concern four points.
This problem is usually overcome encoding duration informations in a network orthogonal to the interval relationship network, but this strategy presents some limits.
In the IA framework [l] it does not guarantee the total consistency  0-7695-11074/01%10.000 2001 IEEE  -.
51  modified to include qualitative relations about interval durations.
stead of 3-consistency.
In this paper we extend ZNDU in two directions: we enrich its expressive power introducing points and maintaining the same computational properties, and we provide it with an axiomatic theory capable of handling qualitative temporal information about points, intervals and durations in a unified framework.
In this theory we introduce both points and intervals as first-class domain entities (called general intervals)'.
As a consequence, we generalize the meets relation introduced in [l] defining a new primitive general meets that is not irreflexive.
Furthermore, to handle qualitative informations about general interval durations, we add the primitive not longer than.
This theory allows one to make explicit the properties of entities and of relations and provides a direct formal explanation of composition table.
This type of explanation is often given in terms of point structures: an interval is reduced to a pair of points and all the relations between intervals are defined in terms of relations among their endpoints.
To better understand the "nature" of general intervals and points we analyze the linksbetween general interval structures and point spuctures.
This type of analysis is important also from the ontological point of view: if one can formally reduce general interval structures to point structures and vice versa, the choice of basing time either on points or on general intervals is only a matter of ontological adequacy as well as of eleganceleconomy of expression.
Delbition2.1 A general interval structure is an ordered pair (I,1 1 ) where I is a non empty set of "general intervals" and 21 is a binary relation on I x I called "general meets".
A general interval structure with qualitative duration is an ordered triple ( I , 11 , 5 ) where ( I , 11 ) is a general interval structure and 5 is a binary relation on I x I called "is not longer than".
Definition 2.2 A binary relation is a linear order (LO) if it is rejexive, transitive, antisymmetric, and linear.
A binary relation i,sa strict linear order (SLO) if it is irrejexive, transitive, anld linear.
Definition 2 3 A GI structure is a general interval structure satisfying the following axioms: Uniqueness of "meetingplace (U NI - 11 ) ( V X , Y, Z,v E I )( ( X 11 z A x 11 v A Y 11 2) -+ y ii U ) "  Uniqueness of "end places" (U EN D - 12 ) ( V z , y , z , v E I)((zl1z11yAxl1v1ly)- + z = v ) Existence of sum (SU M - 11 ) (VX,y, z,v E I ) ( x11 y 11 z 11 v  (3s E I ) ( x11 s 11 U ) )  Weak linearity (WLIN- 1 1 ) (VX,Y,Z,V E I ) ( ( z i i y ~ z i i v-+ ) (3s E I ) ( x l l s l l v v z l 1 s l l y ) )  2.
General interval structures  -  4  In this section, first we introduce a structure based on one set of entities, called general intervals and on one primitive relation, called general meets.
In this structure, we can define "points" as general intervals that meet themselves and "intervals" as general intervals that do not meet thenkelves.
We show that all the standard relations between intervals and points introducedin [6] cab be defined, and we propose an axiomatization that permits to prove (i) the axioms of Allen and Hayes for meet as given in [3], (ii) the axioms for relations between points and intervals introduced in [111.
Furthermore, in order to deal with qualitative relations on durations, we extend this structure by includingthe primitive not longer than that permits to define all the relations between pairs of intervals considered in ZNDU .
We propose an axiomatizationthat permits to prove the composition table of Interval-Interval binary relations assumed in [SI and the full standard composition table of binary relations (Point-Point, Interval-Interval, Interval-Point, and Point-Interval relations), as Table 2 in [ 6 ] , properly  .
Unboimdedness(UN B - 11 ) (VX E I ) ( q y , z E r ) ( y 11 11 z  A ' ( 9 11 y ) A  -(z 11 2))  Existence of degenerate intervals (EXM - 11 ) (VX E I ) ( ~ Y ,Ez I ) ( ~ i i ~ i i ~ A y 1 i y A z 1 i z ) Identity of degenerate intervals (I DM- 11 ) (VX,Y E I ) ( ( z l l yAy11 z) -+ 5 = y) In comparison with Allen and Hayes's theory as given in [ 3 ] , ( i ) ( L l N l - l 1 ) , (UEND-ll),and(SUM-ll) arealready present; (ii) (WLIN- 1 1 ) and (UNB- 11 ) are direct modifications of Allen and Hayes's linearity and unboundedness axioms iin order to manage the introduction of degenerate intervals: (iii) (EXM - 1) ) and (ID M - 11 ) are new axioms for degenerate intervals, the first one ensures the existence of two degenerate intervals ending a given interval (this existence condition is necessary to prove the second part of Theorem 2.1) and the second one ensures the identity of all the intervals that meet themselves.
'General intervals must be not confused with "generalized intervals".
Definitioln 2.4 Let ( I , 11 ) be a general interval structure.
We define the following predicates and relations:  In the first case we refer to convex intervals that can have null length, in the second case, in the literature, one refers to intervals that can be non-convex.
52  P(x) Z(x)  I( i' begin@, i) end@,i) p < p'  xllx A  =  '  l(Xl1X)  Z ( i )A Z(i') A i 11 i' P ( p )A Z(i) A p 11 i P ( p ) A Z ( i ) A i llp (3E I)(begin(p,i) Aend(p', i))  iR<i' iR-iI iR'i'  x is a point x is an interval i meets i' p begins i p ends i p precedes p'  (i) the "meets" relation 11 satisjies all the axioms in the Allen and Hayes's theory as given in 131 (theory TA);  Observation 2.1 Given two relations RY and R P among the above 25 relations, one can directly see that: R;' o R T = {RPIR, E {R1oR2}andrz E { ~ 1 0 ~ 2 } } n R z ~ v u .
(ii) the <, begin, and end relations satisfy all the axioms given in [ I l l (inparticular < is a SLO).
Theorem 2 3 Let ( I , 11,5) be a GID structure.
Then ( < I 0 < I ) = { < I } , (<I 0 - I ) = (=I 0 < I ) = { < I } , ( > I o > I ) = { > I } and ( < I o > I ) = (>Io<I) = { < I , - 1 , > I } .
From this, the Observation 2.1 and Allen's compositiontable proof given in [2], itfollows that the composition table of these 25 relations corresponds to the composition table assumed in ZNVU .
Definition 2.5 A GID structure is a general interval s t m ture with qualitative duration (I,)1,5)such that ( I , 2 1 ) is a GI structure; 5 is reflexive, transitive and linear; the following links between 5 and 11 hold: (ADD- 1 1 ) (Va,b,x,y , z E I)((a11xIlyllbAa l l z l l b ) + z 5 z A y iz) (ADD*- 1 1 ) (Va,b,x,y,z E I ) ( ( a 1 l x l l y l l b A a l l z l l b A x M z ) + Y 11Y) (Va, b, x , y , z E I)((a11x11 yll b A a11 a11 b A y M z )  2.2.
Point-Point (P-P) relations The binary relations between points already introduced are the identity and the precedence defined in Definition 2.4.
We have already shown that in a GI structure the precedence is a SLO, and then one can easily prove the standard composition table for precedence, identity and the inverse of precedence (these 3 relation clearly form a JEPD set).
4. x l l x )  M  k  i R i ' ~ ci I i ' i R i I ~ Gi I il iRi'Ai >Ii'  Theorem2.2 Let (I,11,s) be a GID structure.
Then only 25 relations (among the 39 dejined in Dejinition 2.6) are admissible and they form a JEPD (Joint Exhaustive Painvise Disjoint) set.
The 14 relations excluded are:{eq<, eq', s-, s', si-, si<,d-, d', di-, di<,f =, f', f i-, f i< }.
These 25 relations are the same introduced in ZNVU and for this reason they will be' called R ~ N V ~ .
Theorem 2.1 Let (I,[ I ) be a GI structure.
Then:  wherex  k  y 4x 5 y Ay 5x  2.1.
Interval-Interval (1-1) relations 2.3.
Point-Interval (P-I) relations Definition 2.6 Let (I,11 ,i) be a general interval structure with qualitative duration.
By means of 11 relation, following [ I ] , we define the 13 Interval-IntervalAllen's relations ({b, bi, m, mi,s, si,d , di, f,f i, a , ai,eq}).
By means of the 5 primitive we dejine the following 3 relations between intervals:  i < I i'  Definition 2.7 Let (I,11 , d )be a general interval structure with qualitative duration.
We define the standard 5 binary relations between points and intervals asfollows: before(p,i) starts(p, i) during(p,i)  Z ( i ) A Z(i') A i 5 i' A -~(i' 5 i) i is shorten than i'  finishes(p,i) after(p, i)  4 4  (3p' E I)(begin(p',i) Ap < p') begin@, i) (3p',p" E I)(begin(p',i) A end(p",i) A p' < p < p") end(p, i) (3p' E I)(end(p',i) Ap' < p)  Theorem 2.4 Let ( I , I ?
, < ) be a GID structure.
Then the relations introduced in Dejinition 2.7 form a JEPD set and the composition tables between P-P and P-I relations and between P-I and I-I relations are the standard ones.
Combining the I 3 Allen's relations and the 3 relations above, we dejne 39 relations between intervals introducing for each Allen's relation R thefollowing 3 relations:  The composition table between P-P and P-I relations is the standard one because P-P and P-I relations do not carry any information on durations.
In the case of the composition  53  only some weak properties must necessarily hold in point structures,.
In particular, we show that, defining general intervals as pairs of points (x,y) such that x y, it is not necessary to define durations as y - x: to prove the full compositnon table, it is sufficient to consider points and distances between points as disjoint sets and to take the weak structure PD (see Definition 3.3).
It is not already clear whether this structure is minimal or not.
table between P-I and 1-1 relations, given the P-I relation Rp-I and the three 1-1 relations R,<_,,RF-, ,R,>_,one can see that, because P-I relations do not carry any information about durations, Rp-I o R,<_,= Rp-I o RTwI= RP-I o R , > _then I ; they coincidewith Rp-I o RI-I in the standard composition table.
<  2.4.
Interval-Point (I-P) relations  Definitioin 3.1 A point structure is an orderedpair ( P ,5 p ) where P is a non empty set of "points" and 5 p is a binary relation on P x P called "precedence".
A point structure with distances is an ordered Suple ( P ,D , S p , < D , dist) where (F', I p ) is a point structure; D is a non empty set of "distances"; I Dis a binary relation on D x D; dist is a temary relation on D x P x P called "distance".
Definition 2.8 Let ( I , 11 , 5 )be a general interval structure with qualitative duration.
We dejine the standard 5 binary relations between intervals and points as the inverses of the 5 binary relations between points and intervals introduced in Dejinition 2.7, i.e.
:  i R i p L!
pRi  Definition 3.2 A P structure is a point structure where the precedence relation is a LO and thefollowing axiom holds:  Theorem 2.5 Let ( I , 11 ,5)-be a GID structure.
Then the relations introduced in Definition 2.8 form a JEPD set and the composition table between I-I and I-P relations is the standard one (in the sense described above for the composition of P-I and I-I relations).
Unboundedness (ILL) (Vx E J P ) ( ~ Yz ,E P ) ( y I Px S p z A z # y A x  # z)  Definition 3 3 A PD structure is a point structure with distances (E', D , S p , 50,dist) such that (P, I p ) isa P structure: I Dis a LO: dist is a commutative total function and and dist hold: thefollowing links between S p ,  The composition tables between I-P and P-P relations and between P-I and I-P relations are the standard ones because P-I and I-P relations do not carry any information on durations.
For the same reason, the composition table between I-P and P-I is obtained from the standard one by adding information about duration when possible: if in the standard table we have R , 0 Rb = { R I ,.
.
.
,R,} then, in the new composition table, we have R , o Rb = {R:, RF, R:, .
.
.
,R,<, RE, R z ] n R Z N D ~ .
Therefore, in a GID structure we are able to prove the standard full composition table in [6] in which the composition tables P-I o 1-1, 1-1o I-P, 1-1o 1-1, and I-P o P-I, are extended to handle the 25 1-1relations which involve qualitative information about interval durations*.
(DISTR,-d i s t ) (Va,b E D)(Vx,y, z E P ) ( ( xI p y L p z A a dist(x,y) Ab dist(y,z ) A c dist(x,z ) ) + a 50 c A b S D c )  3.
Point structures Definition 3.4 Let PS = ( P ,L p ) be a point structure.
We dejine the general interval structure associated with PS ( @ ( P S= ) ( I , 1 1 ) ) in the following way:  In this section we introduce two kinds of point structures and we show their equivalence with respect to the general interval structures GI and GID presented in Section 2.
This equivalence is established defining relations between intervals in terms of relations between their endpoints andor their distances and, vice versa, relations between points in terms of relations between classes of general intervals which meet at these points (cf [lo]).
Besides pointing out the equivalence of the ontological choices between points and general intervals, our analysis reveals that, as far as qualitative reasoning is concerned,  - I={(x,y)Ix,yEPandxIpy}, - (x,5r)t l ( 2 , v) ify  = z.  Theorem 3.1 The general interval structure @ ( P S )associated wi,tha P structure PS is a GI structure.
Definition 3.5 Let PSD = (P,D , S p , S D ,dist) be a point structure with distances.
We dejine the general interval structure with qualitative durations associated with PSD (@ (PSD)= ( I , 12 , 5 ) )in the following way:  2Note that in a GI structure we can prove the standard full composition table in 161.
54  -  ( I , 22 ) is the structure associated with (P,5 p ) as in definition 3.4, ( 2 7 ~ )  5  (27~)  b diSt(Z,V ) A U  h7  (%b b).
properties can be seen as a generalization of the results presented in [5], though the introduction of the relations concerning duration does not allow a direct extension of the earlierproof.
In order to define convex and pre-convex relations in our framework, we order the atomic IP and PI relations as in Figure 1, where those represented by black circles are said to be black atomic  E D)(a d i s t ( x 7 ~ A )  Theorem 3.2 The general structure with qualitative durations @ ( P S D )associated with a PD structure P S D is a GID structure.
bi  3.2.
From general intervals to points Definition 3.6 Let ZS = ( I, 21 ) be a general interval structure.
We deJine the point structure associated with ZS (C(ZS) = (P,5 p ) ) in the following way:  b  S  0  3 Interval-Point relations 2  d n  1  ai 0 4  f  a  w  0  2 3 Point-Interval relations  4  Figure 1.
Linear order of IP and PI relations.
- [x,y]IP [z,v]i f ( 3 w E I)(xllw1lv).
Theorem 3.3 The point structure C(ZS) associated with a GI structure ZSis a P structure.
Definition 4.1 A convex relation is a point-point relation except #, or an interval-intervalconvex relation as defined in [SI,or an interval-point (or point-interval) relation corresponding to an interval in Figure 1.
Definition 3.7 Let Z S D = ( I , 11 ,5 ) be a general interval structure with qualitative durations.
We define the point structure with distance associated with ZSV (E ( Z S D ) = (P,D , S p ,50,dist)) in thefollowing way:  Definition 4.2 A pre-convex relation is a point-point relation, or an interval-intervalpre-convex relation as defined in [8], or an interval-point (or point-interval) relation obtainedfrom a convex relation by removing at most black atomic relations.
- (P,5 p ) is the structure associated with ( I , 21 ) as in defiition 3.6,  ~ 1 % I x E I } where 1x1  1  fi  di v  0  - P = {[x,y] I x,y E I and z U y } where [z,y] = { ( z , v) I z , Y E I and x 11 v and z 11 y}  - D = {1  si  0 0  = {y I y E I and y x  As in [9,4] we interpret intervals and points as elements of the half plane H defined by X 5 Y in the ( X , Y ) plane.
In this representation, all the points belong to the I D lT/I%g x 5 line Y = X.
As shown in Figure 2, given a point (a,a), - lal, dist([z,y],[z,v])ifl ( 3 s E I ) ( ( Z UvS Uwe Vcan associate to each interval-point relation R that region in H which is admissible for an interval I such that z 11 s 11 y) A s x a).
I is in relation R with (a, a).
In the same way, we can associate to each point-interval relation and point-point reTheorem 3.4 The point structure with distances C ( Z S D ) lation a region of the line Y = The dimension of a relaassociated with a GI D structure Z S D is a PD structure.
tion is defined as the dimension of the associated region: it turns out that interval-point relations are of dimension 2 or 4.
Computational properties 1, while point-interval relations are of dimension 1 or 0,as well as point-point relations.
In this geometric representaIn order to perform reasoning, it is useful to represent tion, convex relations correspond to convex regions, while qualitative temporal information by means of a binary conpre-convex relations correspond to convex regions with posstraint network, consisting of a set of variables representing sible discontinuities of lower dimension.
points, a set of variables representing intervals, and a set of We can extend the results concerning the computational binary constraints between them.
These are the four kinds properties of ZNVU to our framework, in which we can of binary constraints introduced in section 2. handle both points and intervals.
In [8] it is shown that for two subclasses of ZNDU relaTheorem 4.1 A strongly 4-consistent network such that all tions, namely convex and pre-convex relations, the tasks of the relations are convex is also strongly n-consistent, hence checking consistency and computing the minimal network benefit from particular computational properties.
These minimal.
21,  x.
55  E. Hajnicz.
An analysis of structure of time in the first order predicate calculus.
In L.Bolc and A.Szalas, editors, lime & Logic - a computational approach.
UCL Press, 1995.
Y'  G. Ligozat.
Towards a general characterization of conceptual neighborhoods in temporal and spatial reasoning.
In Proc.
of AAA194 Workshop on Spatial and Temporal Reasonitzg, Seattle, 1994.
G. Ligozat.
A new proof of tractability for ORD-Hom relations.
In Proc.
of AAAI-96, pages 395-402, Menlo Park, 1996.
AAAl Press I MIT Press.
I. Meiri.
Combining qualitative and quantitative constraints in temporal reasoning.
Arti)icial Intelligence, 87(1-2):343385,1996.
I. Navarrete and R. Marin.
Qualitative temporal reasoning with points and durations.
In Proc.
of IJCAl97, pages 14541459, Nagoya, Japan, 1997.
A. IC.
Pujari, G. V. Kumari, and A. Sattar.
ZNVU : an inteival & duration network.
In Proc.
of the Australian Conference on AI, 1999.
A. E;.
Pujari and A. Sattar.
A new framework for reasoning about points, intervals and durations.
In Proc.
of IJCAl99, pages 1259-1264, Stockholm, Sweden, 1999.
J. van Benthem.
The Logic of Eme.
D. Reidel Publishing Company, Dordrecht, 1983.
L. \Tila and E. Schwalb.
A theory of time and temporal incidence based on instants and periods.
In Proc.
of Third  di  fi  Figure 2.
Geometric representation of IP relations.
Theorem 4.2 A strongly 4-consistent network such that all the relations are pre-convexis consistent.
The extension of these results to our framework follows from the fact that, given a network involving points and intervals, it is possible -to consider a corresponding ZNVU network where each-point P is represented by an interval XP, assuming X as a reference point.
The two networks are equivalent, since they have the same set of solutions apart from the relevant transformation, therefore consistency holds for one network if and only if it holds for the other one.
1nt.lVorkshop on Temporal Representation and Reasoning Eme 96, pages 21-28, Los Alamitos, CA, 1996.
EEE Com-  puter Society Press.
R. VVetprasit and A. Sattar.
Temporal reasoning with qualitative and quantitative information about points and durations.
In Proc.
of AAAI-98, pages 656-664, Menlo Park, 1998.
AAAI Press.
5.
Conclusions We have proposed an axiomatic theory capable of handling qualitative information about points, intervals and durations in a unified framework.
The relevant temporal network corresponds to ZNVU enriched with points as temporal primitives.
The theory is based on the notion of general interval and two relations: general meets and not longer t h n .
In this structure, points can be defined as general intervals that meet themselves, and intervals as general intervals that do not meet themselves.
We have proved that the relevant computational results of the ZNVU framework can be extended to our framework, where both points and intervals are handled in a unified network.
References J. E Allen.
Maintaining knowledge about temporal intervals.
Communication ofthe ACM, 26( 1):832-843, 1983.
J. E Allen and P. J. Hayes.
Moments and points in an interval-based temporal logic.
Computational Intelligence, 5:225-238, 1989.
56