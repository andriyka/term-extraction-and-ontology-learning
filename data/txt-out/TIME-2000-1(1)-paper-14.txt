Closure Properties of Classes of Spatio-Temporal Objects Under Boolean Set Operations Sofie Haesevoets and Bart Kuijpers Limburg University (LUC) Department WNI 3590 Diepenbeek, Belgium fsofie.haesevoets, bart.kuijpersg@luc.ac.be Abstract We study a model for spatio-temporal objects, introduced by Chomicki and Revesz, in which spatio-temporal data is specified by a spatial reference object together with a geometric transformation that determines the movement of the reference object in time.
We give complete results concerning closure under Boolean set operators for the different classes of spatio-temporal objects introduced by these authors (In particular, we also answer a conjecture by Chomicki and Revesz negatively).
Since only few classes are closed under all set operators, we suggest that their model should be extended in order to increase its practical applicability.
1.
Introduction In recent years, the number of applications in which spatio-temporal data has to be manipulated and stored in a database has increased steadily [4, 5, 7].
Meteorological databases and air traffic control data are only two examples of such applications.
Chomicki and Revesz claimed that a new framework is necessary to model this new type of data and introduced the concept of a spatio-temporal object [3].
They specify a spatio-temporal object by giving a spatial reference object and a time-dependent geometric transformation that determines how the reference object moves through space in a certain time interval (the same authors have also introduced variations of this model [1, 2]).
In their elegant definition, a spatial and temporal object are combined very naturally into a spatio-temporal object.
Chomicki and Revesz consider a number of natural types of spatial reference objects (which can be considered as prototypes from well-known classes such as the polygons, the triangles and the rectangles) as well as a number of natu-  0-7695-0756-5/00 $10.00 AL 2000 IEEE  ral classes of spatial movement (defined by well-known geometrical transformation groups such as the affinities, the scalings and the translations).
They have started a study of how these classes behave with respect to the set-theoretic operators.
This study is motivated by practical needs.
If an air traffic control system is modeled by spatio-temporal objects, then, to be able to model situations of collision and safe traffic, it is desirable to use a class of spatio-temporal objects that is closed under intersection.
In this paper, we continue this research of Chomicki and Revesz and give complete closure results for several classes of spatio-temporal objects under union, intersection and set-difference.
We observe that all classes are closed under union.
For set-difference and intersection, the results show that when scalings are considered as transformation, only rectangles as reference objects give rise to closure.
For polygons and triangles more general affinities guarantee closure only if they are described by appropriate rational functions.
We show that intersection and set-difference are not closed under translations for any class of reference objects.
Since for the class of rectangles closure is obtained more often than for triangles, we also consider right-angled triangles.
We show that the hope that this class would be closed under more groups of transformations than general triangles is vain, however.
Since many relevant classes are not closed under intersection and difference, it is useful to extend the model of Chomicki and Revesz such that these classes become closed.
One obvious approach to follow would be to allow all Boolean set operators, and not just union, in the construction of spatio-temporal objects from atomic objects.
This paper is organised as follows.
In Section 2, we give definitions and describe the relevant classes of spatiotemporal objects.
The closure results for these classes with respect to Boolean set operators are given in Section 3.
Possible improvements of the current model are discussed in Section 4.
Some further details are given in an Appendix.
2.
Definitions and preliminaries  2.2.
Interesting classes of geometric objects  In this Section, we define the notion of spatio-temporal object.
This definition is adopted from Chomicki and Revesz [3].
They have defined a spatio-temporal object as a reference spatial object (a representative of a class of objects) together with a continuous transformation that defines how this spatial object moves in time.
In this paper we will restrict our attention to two-dimensional spatiotemporal objects.
2.1.
Spatio-temporal and geometric objects Let plane.
R be the set of real numbers and R2 be the real R  Definition 2.1 A spatial object is a subset of 2 .
A temporal object is a subset of .
A spatio-temporal object is a ut subset of 2+1 .
R  R  Definition 2.2 An atomic geometric object (S; I; f ), where  O  is a triple   S  R2 is the spatial reference object of O, which is semi-algebraic1;   I  R is the time domain (a point or interval) of O;  We now define special classes of geometric objects that are relevant to spatio-temporal database practice (introduced by Chomicki and Revesz [3]).
These classes hS ; Fi are determined by the type S of reference spatial object and the type F of transformation function (for clarity, a geometric object belongs to a class if all of its atomic geometric objects belong to that class).
The classes of reference objects that we will consider are SPoly (arbitrary polygons), ST r (arbitrary triangles), ST rAx (triangles with two sides parallel to the coordinate axes), and SRect (rectangles with all sides parallel to the coordinate axes).
In this paper, we assume triangles, polygons and rectangles to be filled objects.
But since we allow two or more corner points of a triangle or rectangle to coincide, the model can deal with polylines too.
A line segment and a point are considered triangles.
Also line segments parallel to the axis and points are considered rectangles.
The classes of transformation functions we will consider are FA (the affine transformations), FSc (the scalings), FTrans (the translations) and Fid (consisting of the identity mapping) .
These classes are defined as follows.
The class FA of affine transformations contains mappings of the form    and   f : R R !
R O.
2  2 is the transformation function of  A geometric object is a finite set of atomic geometric objects.
The time domain of a geometric object is the smallest time interval that contains all the time intervals of the composing atomic geometric objects.
Recall that the smallest interval containing a set of intervals is also known as the ut convex closure of this set.
The semantics of an atomic geometric object O is the spatio-temporal object  S; I; f )  =(  st(O) = f(x; y; t) 2 R2  R j (9x0 )(9y0 )((x0 ; y0) 2 S ^t 2 I ^ (x; y) = f (x0 ; y0 ; t))g:  The semantics of a geometric object fO1 ; : : : ; On g is the union of the spatio-temporal objects st(Oi ), 1  i  n. Remark that a spatio-temporal object is empty outside the time domain of the geometric object that defines it.
Also, within the time domain a spatio-temporal object is empty at any moment when no atomic object exists.
1A  semi-algebraic set in the plane is a Boolean combination of sets determined by a polynomial inequality of the form p(x; y ) > 0, where p is a polynomial with integer coefficients in the real variables x and y .
0-7695-0756-5/00 $10.00 AL 2000 IEEE       x; y; t) 7!
ac((tt)) db((tt))  (   xy  +  e(t) f (t) ;  where a(t)  d(t) c(t)  b(t) 6= 0 for all t in the time domain under consideration.
The class FSc of scalings consists of the affine transformations for which b(t) and c(t) are identical to 0.
The class FT rans consists of the scalings for which a(t) and d(t) are identical to 1.
For practical purposes we will only consider functions a(t), b(t), c(t), d(t), e(t), f (t) that belong to certain wellbehaved classes.
These are the rational functions (i.e., fractions of polynomial functions), the polynomial functions and the linear polynomial functions.
The corresponding classes of transformations will be denoted as F Rat , F Poly Rat represents the class of ratioand F Lin .
For example, FSc nal scalings.
We assume that the time domain of an atomic geometric object belongs to the domain of the transformation function (hence, the denominator of a rational function in the definition of a transformation is never zero in a time domain).
Note that the shape of a spatio-temporal object at a certain time is not necessarily the same as the shape of the reference object of the geometric object that gives rise to the spatio-temporal object.
For example, a rectangle is mapped to a parallelogram under an affinity.
2.3.
Example Let OA and OB be two (atomic) geometric objects with spatial reference objects SA and SB respectively the triangles with corner points ( 1; 0), (1; 0), (0; 1) and ( 1; 0), (1; 0), (0; 1), and time domains IA = IB = [0; 2].
In this time domain, SA remains at its place while SB is translated with constant speed (equal to 1) in the direction of the positive y -axis.
At t = 0 both objects intersect in a line segment.
For 0 < t < 1 they intersect in a hexagon, for 1  t < 2 in a quadrangle, and finally for t = 2 in a point.
1  t<2  t=2  o<t<1  The following technical property describes how and how often the form (or appearance) of the intersection or difference of two atomic geometric objects can change.
We observe that the intersection of two moving triangles can be empty, a single point, a straight line segment, a triangle, a quadrangle, a pentagon and a hexagon.
The intersection of two moving rectangles can be empty, a single point, a line segment or a rectangle.
We call all these different forms of the intersection its possible shapes.
Also the difference of two triangles or two rectangles can take a finite number of different shapes.
In the example in Figure 1, the intersection takes four different shapes, whereas the difference takes five different shapes.
In the following, we denote for two time domains I1 and I2 by I1 [ I2 the convex closure of the set I1 [ I2 in .
R  t=0  Property 3.3 (Finite time partition) Let O 1 and O2 be two atomic geometric objects with rational affine transformations with time domains I 1 and I2 .
There exists a finite partition of the interval I 1 [ I2 in points and intervals such that st(O1 ) \ st(O2 ) takes a single shape in each element of the partition.
The same is true for st(O 1 ) n st(O2 ).
Figure 1.
Two atomic geometric objects.
The time domain can be partitioned in four parts such that the intersection of the two objects retains the same shape during each element of the partition.
3.
Boolean set operators We investigated which of the above classes hS ; Fi are closed under the Boolean set operators [ (union), \ (intersection) and n (set difference).
Definition 3.1 Let  be one of [, \ or n. We say that the class hS ; Fi is (atomically) closed under  if for any two (atomic) geometric objects O1 and O2 in hS ; Fi there exists an object O in hS ; Fi such that st(O) = st(O1 )  st(O2 ).
ut  We will refer to an object O that satisfies the condition in the definition as an intersection, union or difference of O1 and O2 (they need not to be unique).
For the union operation, the closure follows immediately from the definition.
Property 3.1 For any class of objects S and any class of transformations F , hS ; Fi is closed under [.
ut  For \ and n the situation is more complicated.
The following property will help to simplify the proofs below considerably, however.
Its proof follows straightforwardly from simple set-theoretic considerations.
0-7695-0756-5/00 $10.00 AL 2000 IEEE  Property 3.2 (Atomicity) Let S be a class of objects and F a class of transformations.
Then hS ; Fi is atomically closed under \ if and only if it is closed under \.
If hS ; Fi is atomically closed under \ and n, then it is also closed under n. ut  Proof (sketch).
From the assumption that the reference objects of O1 and O2 are semi-algebraic and their transformation functions are affine rational functions, it follows that the sets st(O1 ) and st(O2 ) are semi-algebraic subsets of 2+1 .
We can therefore consider the set st(O ) \ st(O ) 1 2 (or st(O1 ) n st(O2 )) as a subset of 2+1 parameterized by the time parameter t. It follows from the Trivialization Theorem (page 147 of [6]) that the set of corner points of st(O1 ) \ st(O2 ) (or st(O1 ) n st(O2 )) can only take a finite number of shapes, each in a semi-algebraic subset of I1 [ I2 .
ut In the following we will only talk about time intervals in the finite time partition (points are intervals with coinciding endpoints).
The next theorem summarises the closure results for intersection and set-difference.
R  R  Theorem 3.1 For any class of objects S among S Poly , ST r, ST rAx and SRect and any class of transformations F among FA , FSc, FTrans and Fid , the closure with respect to \ and n is summarized in Table 1.Closure is indicated by +, nonclosure by .
ut  Table 1.
Summary of all closure results.
\, n  P oly Rat F P oly F Lin F Rat F P oly F Lin F Rat Lin FA A Sc Sc Trans FT rans FTrans Fid Sc A  y  SPoly  +  (*)  *  +  ST r  +  (*)  *  +  ST rAx  +  SRect  +  +*  +  +  +  +  +  y  The items marked with * are proven in [3], the ones marked with (*) follow directly from results or proofs in the same paper.
The ones marked with y are from [7].
The remainder of this section is devoted to proving this theorem.
We do this by proving a series of lemmas.
We start with the affine transformations.
For the most general classes we have the following positive result.
Rat i and hS , F Rat i are Lemma 3.1 The classes hSP oly,FA T r A closed under \ and n.  Proof (sketch).
It suffices to show this lemma for triangles.
By Atomicity (Property 3.2), we have to show that the intersection (or difference) of two atomic geometric objects O1 and O2 with reference objects from ST r is represented by Rat i. an object in hST r, FA According to the Finite time partition (Property 3.3), the intersection (or difference) of the two triangles takes different shapes in elements of a finite partition of I1 [ I2 .
Let I be an interval in this partition.
We have to consider all possible shapes of the intersection in time interval I .
The intersection can be a polygon, a line segment or a single point.
These different cases are explained in detail in the Appendix.
The idea of the proof is to construct a single affine transformation from the movements of the corner points of the intersection (or difference), and then to show that its coeffiut cients are rational functions of time.
In general, if the affine transformations of O1 and O2 are given by polynomial or linear functions, the corner points (x1 ; y1 ), (x2 ; y2 ) and (x3 ; y3 ) of triangles in the intersection (or difference) are in general rational in these functions.
The computations in the proof of the previous lemma (see the Appendix) suggest that this leads to non-closure.
P olyi, hS Lin Lemma 3.2 The classes hSP oly,FA Poly ,FA i, Poly Lin hST r,FA i and hST r, FA i are not closed under \, n.  0-7695-0756-5/00 $10.00 AL 2000 IEEE  Proof (sketch).
It suffices to prove the theorem for triangles.
We first give a counterexample for intersection for the class Lin i.
Consider two atomic geometric objects O hST r, FA 1 and O2 with reference objects triangles with corner points (1; 1), (3; 1), (2; 3) and (2; 2), (4; 2), (3; 4), respectively.
The affinetransformations of  the triangles   are given by the matrices  t 2t t t  3  and  t t  t t  2 +1  3 +1  ; respectively.
In  some interval of the strictly positive t-axis, the intersection of the two objects is a triangle with corner points (181t+70) 1 (243t+70) 29 37 (6t + 2; 8t + 2), ( 1 2 t (13t+4) ; 2 t (13t+4) ) and ( 4 t; 4 t).
If this triangle were to be the image of a single triangle under an affine transformation, then the computations in the proof of Lemma 3.1 (in the Appendix) show that this needs to be a rational matrix.
For example, if the original intersection triangle (with corner points (2; 2), ( 25 ; 2) and ( 49 ; 52 )) is taken as a reference object, the transformation would look like:  4+ 4+  2 36t) 5 1 ( 32+35t t 2 4 (13t+4) 2 100t) 5 1 ( 32+75t t 2 4 (13t+4)  !   + x y  2 1 ( 304t 112+9t ) 2 (13t+4) 2 1 (384t+112+3t ) 2 (13t+4)  !
:  This is clearly not a linear transformation, not even a polynomial one.
It can be shown that this is the case for any reference triangle.
If the intersection were the image of more triangles then at least one of them would have a side that is mapped onto an initial line segment of the side 1 (181t+70) 1 (243t+70) 29 37 ( 2 t (13t+4) ; 2 t (13t+4) ) and ( 4 t; 4 t) of the intersection.
A similar algebraic argument as the one followed above then shows that the corresponding affine transformation needs to be rational in at least one of the coordinates.
P oly i is not This example proves also that the class hST r;FA closed under intersection.
We can use the same example t and a similar argument to settle the case of difference.
u  L i is closed under \ and Lemma 3.3 The class hSRect ,FA n for L 2 fLin; Poly; Ratg.
Proof (sketch).
We consider atomic geometric objects O1 and O2 with reference objects two rectangles S1 and S2 both transformed by affine transformations in the time domains I1 and I2 .
As a rectangle is uniquely determined by the coordinates of its upper left corner and its lower right corner, we define S1 and S2 by (xul1 ; yul1 ); (xlr1 ; ylr1 ) and (xul2 ; yul2 ), (xlr 2 ; ylr 2 ) respectively.
According to Finite time partition (Property 3.3), the intersection of the two reference rectangles S1 and S2 takes a finite number of different shapes in the interval I1 [ I2 .
Let I be an interval in I1 [ I2 such that the intersection takes the shape of a rectangle in I (most general case).
We choose the intersection of S1 and S2 to be the reference object of the intersection.
Suppose the upper left corner point of the intersection originates from S2 and the lower right corner point originates from S1 .
The reference object of the intersection is then defined by (xul2 ; yul2 ) and (xlr1 ; ylr1 ).
For each time moment t 2 I , the coordinates of the intersection are  a2 (t)xul2 +b2(t)yul2 +e2(t); c2 (t)xul2 +d2 (t)yul2 +f2 (t))  (  and  a1 (t)xlr1 +b1 (t)ylr1 +e1 (t); c1 (t)xlr1 +d1 (t)ylr1 +f1(t)):  (  To find the transformation of the intersection, we have to solve a similar matrix equation as in the proof of Lemma 3.1 (see the Appendix, the case where the intersection is a line segment).
Therefore, the solution in this lemma is also an affinity without translation vector that is linear in the components of the affine transformations of O1 and O2 .
L i is closed We can conclude that the class hSRect ,FA under \ for L 2 fLin; Poly; Ratg, as for rectangles, the corner points of the intersection have the same functions of time as the affine transformations of O1 and O2 .
The proof for n is analogous to the above one (for each of the ut rectangles that constitute the difference).
The following lemma concludes the results for affinities.
We omit the proof.
Rat i is closed under \ and Lemma 3.4 The class hST rAx,FA Poly Lin i and hS n. The classes hST rAx,FA T rAx,FA i are not closed under \ and n.  The proof of the positive case of the above lemma is based on the property that affinities do not preserve parallelism to the axes.
We will see later that for scalings, which do preserve parallelism to the axes, the class of the objects of ST rAx is not closed.
We divide the results for scalings into one positive and two negative results.
Lemma 3.7 answers the conjecture of Chomicki and Revesz [3] negatively.
0-7695-0756-5/00 $10.00 AL 2000 IEEE  hSRect , FScL i is closed under \ and n for L 2 fLin; P oly; Ratg.
Proof.
Let O1 and O2 be atomic geometric objects in hSRect , FScL i with time intervals I1 and I2 .
According to Atomicity, we have to find objects O and O 0 in hSRect , FScL i such that st(O) = st(O1 ) \ st(O2 ) and st(O0 ) = st(O1 ) n st(O2 ).
Lemma 3.5  We start with the intersection.
According to Finite time partition, the intersection of the two rectangles takes different shapes in elements of a finite partition of I1 [ I2 .
Let I be an interval in this partition and let us assume that the intersection is a rectangle in I (this is the most general case, since a line segment or point can be considered special cases of a rectangle).
We remark that a rectangle is uniquely determined by the coordinates of its upper-left corner point (xul ; yul ) and the coordinates of the lower-right corner point (xlr ; ylr ).
Let assume the upper-left corner point of the intersection comes from O1 and the lower-right from O2 .
Let the scaling of O1 be determined by a1 (t), b1 (t), e1 (t), f1 (t) and the one of O2 by a2 (t), b2 (t), e2 (t), f2 (t) (following the matrix notation of Section 2.2).
The intersection is an atomic geometric object with a rectangle as reference object and a transformation determined by  a(t)  =  a1 (t)xul a2 (t)xlr +e1 (t) e2 (t) ; xul xlr  b(t)  =  b1 (t)yul b2 (t)ylr +f1 (t) f2 (t) ; yul ylr  e(t)  =  (a2 (t)  a1 (t))xul xlr e1 (t)xlr +e2 (t)xul ; xul xlr  f (t)  =  (b2 (t)  b1 (t))yul ylr f1 (t)ylr +f2 (t)yul : yul ylr  These formulas show that if the transformations of O1 and O2 are rational, polynomial, respectively linear, that then also a(t), b(t), e(t), f (t) are rational, polynomial, respectively linear.
Set difference is proven analogously.
The difference is subdivided into at most eight rectangles, and each of their movements can again be described by a scalut ing.
L i and hS Lemma 3.6 The classes hST rAx;FSc T rAx; fidgi are not closed under \ and n for L 2 fLin; P oly; Ratg.
Proof.
Consider the triangle with corner points (0; 0), (1; 0) and (0; 1) and the triangle with corner points ( 13 ; 1), ( 32 ; 1) and ( 23 ; 0), both transformed by the identity transformation.
Their intersection (for an illustration see (A) of Figure 2) cannot be described as a finite union of elements of hST rAx;FScL i since scalings preserve parallelism with the  the x-component (resp.
y -component) of 1 equals the xcomponent (resp.
y -component) of 2 .
From this we can deduce that all triangles in the above disjoint union must have the same scalings.
This concludes ut the proof.
Finally, we give a general negative result for translations.
A  (  ( )  B)  Figure 2.
Counterexample for intersection (A) Lin i. and difference (B) for the clas hST rAx;FSc  coordinate axis.
(Remember, for affinities, this class was closed, because affinities do not preserve parallelism with the coordinate axis.)
The triangle with corner points (0; 0), 1 (1; 0) and (0; 1) and the triangle with corner points ( 3 ; 1), 2 ; 0) provide a counterexample for the differ(1 ; 0) and ( 3 3 ence (for an illustration see (B) of Figure 2).
ut Rat i and Lemma 3.7 Both hST r;FSc closed under \ and n.  hSPoly ,FScRat i are  not  Proof.
It suffices to prove this for triangles.
Let the reference triangle of the atomic geometric object O1 have corner points (0; 0), (1; 0) and (0; 1) and let the reference triangle of the atomic geometric object O2 have corner points 1 1 (0; 0), ( 2 ; 1) and (1; 2 ).
Suppose these objects are trans    formed by the scalings  1  t  0  0  and  t  0  t any moment t > t  0  in strictly  0 these obpositive time domains.
At jects intersect in a single triangle with corner points (0; 0), t 2t 2t t ( t2 +2 ; t2 +2 ) and ( 2t2 +1 ; 2t2 +1 ).
By straightforward algebraic arguments (showing that a system of equations has no solution) it can be shown that it is not the case that there exists a single reference triangle and a rational scaling such that this scaling maps the reference triangle to the intersection.
Suppose the intersection were the union of several atomic objects.
This union can be assumed (or made) to be a disjoint union.
It is not difficult to show that if a scaling 1 maps a side of a reference triangle T1 into a line l and a scaling 2 maps a side of a reference triangle T2 also into l and if they both map a corner point of T1 , resp.
T2 onto the same point, that then 1 equals 2 .
From this we can deduce that all triangles that are adjacent to at least one of the sides of the above described intersection triangle must have the same scalings.
Furthermore, it can be shown that if a scaling 1 maps a side of a reference triangle T1 into a line l that is parallel to the x-axis (resp.
y -axis) and a scaling 2 maps a side of a reference triangle T2 also into l and if they both map a side of T1 , resp.
T2 onto the same line segment, that then  0-7695-0756-5/00 $10.00 AL 2000 IEEE  Lemma 3.8 For each of the classes S considered in the L previous Section, the class hS ; F Trans i is not closed under \ and n, for L 2 fLin; Poly; Ratg.
Proof (sketch).
First, we remark that translations preserve the shape and area of objects and the length of lines.
Consider now two objects from each of the relevant classes that have the interval [0; 1] on the x-axis as one of their sides.
Let the first object undergo the translation ( t; 0) in the direction of the negative x-axis and let the second object undergo the translation (t; 0) in the opposite direction, both in the time interval [0; t0 ], for some t0 > 0.
If the objects at time t = 0 are located on different sides of the x-axis, then their intersection is a shrinking line segment.
If both objects are originally located at the same side of the x-axis, then their differences have increasing area.
So, in both cases, they cannot be described as a finite union of translating obut jects.
4.
Conclusion As can been seen from Table 1 only few classes have closure for all three Boolean set operators.
This negative conclusion, together with the observation that the considered classes of objects are relevant to practice implies the need to adjust the model for geometric objects.
An obvious way to obtain closure in more cases would be to allow more Boolean operators (and not just union) on atomic geometric objects in the construction of geometric objects.
It should be investigated how this can be achieved most economically.
Maybe the additional power of intersection on atomic geometric objects alone or of complement on atomic geometric objects alone is sufficient to obtain closure in all the cases considered in Table 1.
Acknowledgements The authors would like to thank Floris Geerts and Jan Van den Bussche for useful comments on earlier drafts of this paper.
We also thank the reviewers for useful comments that have improved the readability of the paper.
References [1] J. Chomicki and P. Revesz.
Constraint-based interoperability of spatio-temporal databases.
In Proceedings of the 5th International Symposium on Advances in Spatial Databases, volume 1262 of Lecture Notes in Computer Science, pages 142a161.
Springer, 1997.
[2] J. Chomicki and P. Revesz.
Animating spatiotemporal constraint databases.
In Proceedings of the International Workshop on Spatio Temporal Database Management 1999, volume 1678 of Lecture Notes in Computer Science, pages 224a 241.
Springer, 1999.
[3] J. Chomicki and P. Revesz.
A geometric framework for specifying spatiotemporal objects.
In Proceedings of the 6th International Workshop on Temporal Representation and Reasoning, pages 41a46.
IEEE Computer Society, 1999.
[4] A. Frank, S. Grumbach, R. Gting, C. Jensen, M. Koubarakis, N. Lorentzos, Y. Manopoulos, E. Nardelli, B. Pernici, H.-J.
Schek, M. Scholl, T. Sellis, B. Theodoulidis, and P. Widmayer.
Chorochronos: A research network for spatiotemporal database systems.
SIGMOD Record, 28:12a21, 1999.
[5] D. Pfoser and N. Tryfona.
Requirements, definitions and notations for spatiotemporal application environments.
In Proceedings of the 6th International Symposium on Advances in Geographic Information Systems, pages 124a130.
ACM Press, 1998.
[6] L. van den Dries.
Tame Topology and O-minimal Structures.
Cambridge University Press, 1998.
[7] M. Worboys.
A unified model for spatial and temporal information.
Computer Journal, 37:26a34, 1994.  equation below is regular (time dependence is omitted)  0 0 0 1 B 0 0 0 B 0 0 1 B B 0 0 0 B @ 0 0 1 0 0 0 x1  y1  x2  y2  x1  x3  ai (t) bi (t) ci (t) di (t)       xy  +    ei (t) fi (t) ; i = 1; 2; 3:  The condition for the existence of a single affine transformation that transforms these corner points according to their respective affinities is that the first matrix in the matrix  0-7695-0756-5/00 $10.00 AL 2000 IEEE  x3  y3  b c d e  f  1 0 C B C B C B = C B C A B @  a1 x1  c1 x1 a2 x2  c2 x2 a3 x3  c3 x3  + + + + + +  b1 y1 d1 y1 b2 y2 d2 y2 b3 y3 d3 y3  + + + + + +  e1 f1 e2 f2 e3  1 C C C C C A  :  f3  This is the case if and only if the three points (x1 ; y1 ), x2 ; y2 ) and (x3 ; y3 ) are not collinear.
By assumption, this  condition is always satisfied.
We find the affine transformation that transforms the triangle according to the different movements of the corner points, by solving the above matrix equation.
The result of this computation is the affine transformation with coefficients (to save space time dependence is omitted):  a(t)=  (a1 x1 +b1 y1 +e1 )(y2 y3 )+(a2 x2 +b2 y2 +e2 )(y3 x1 y2 x1 y3 +x2 y3 x3 y2 +x3 y1 x2 y1  y1 )  (a3 x3 +b3 y3 +e3 )(y1 y2 ) y x1 y3 +x2 y3 x3 y2 +x3 y1 x2 y1 ;  +x  1 2  Further details for the proof of Lemma 3.1 (closure of    y2  a  (  (a1 x1 +b1 y1 +e1 )(x3 x2 )+(a2 x2 +b2 y2 +e2 )(x1 x1 y2 x1 y3 +x2 y3 x3 y2 +x3 y1 x2 y1  x3 )  (a3 x3 +b3 y3 +e3 )(x2 x1 ) y x1 y3 +x2 y3 x3 y2 +x3 y1 x2 y1 ;  +x  Rat i under \ and n).
hST r, FA  By Atomicity, we have to show that the intersection (or difference) of two atomic geometric objects O1 and O2 with reference objects from ST r is represented by an Rat i. object in hST r, FA According to Finite time partition, the intersection (or difference) of the two triangles takes different shapes in elements of a finite partition of I1 [ I2 .
Let I be an interval in this partition.
The intersection can have three possible shapes during I , namely a polygon, a line or a single point.
In the polygon case, the intersection (or difference) always is a finite union of triangles.
It suffices to show how one Rat i.
The situatriangle in this union belongs to hST r, FA tions where the intersection is a point or a line are treated separately.
First suppose the intersection is a polygon.
We divide the polygon into triangles.
The three corner points (x1 ; y1 ), (x2 ; y2 ) and (x3 ; y3 ) of one such triangle in the intersection (or difference) are transformed by three (in general different) affinities  x2  y3  b(t) =  Appendix  y1  10 0 1C B B 0C C B  C 1C B B 0A @ 1  1 2  c(t) =  (c1 x1 +d1 y1 +f1 )(y2 y3 )+(c2 x2 +d2 y2 +f2 )(y3 x1 y2 x1 y3 +x2 y3 x3 y2 +x3 y1 x2 y1  y1 )  (c3 x3 +d3 y3 +f3 )(y1 y2 ) y x1 y3 +x2 y3 x3 y2 +x3 y1 x2 y1 ;  +x  1 2  d(t) =  (c1 x1 +d1 y1 +f1 )(x3 x2 )+(c2 x2 +d2 y2 +f2 )(x1 x1 y2 x1 y3 +x2 y3 x3 y2 +x3 y1 x2 y1 (c3 x3 +d3 y3 +f3 )(x2 x1 ) y x1 y3 +x2 y3 x3 y2 +x3 y1 x2 y1 ;  +x  1 2  e(t) = x1 y2(a1xx11y+3b+1xy21y+3e1x)(3xy22y+3x3yy21x3x) 2 y1 +x  (a2 x2 +b2 y2 +e2 )(y1 x3 x1 y3 ) y x1 y3 +x2 y3 x3 y2 +x3 y1 x2 y1  +x  (a3 x3 +b3 y3 +e3 )(y2 x1 y1 x2 ) y x1 y3 +x2 y3 x3 y2 +x3 y1 x2 y1 ;  1 2  1 2  f (t)= x1 y2(c1xx11y+3d+1xy21y+3f1x)(3xy22y+3x3yy21x3x) 2 y1 +x  (c2 x2 +d2 y2 +f2 )(y1 x3 x1 y3 ) y x1 y3 +x2 y3 x3 y2 +x3 y1 x2 y1  +x  (c3 x3 +d3 y3 +f3 )(y2 x1 y1 x2 ) y x1 y3 +x2 y3 x3 y2 +x3 y1 x2 y1 :  1 2  1 2  x3 )  These functions give rise to an affinity.
Indeed, the transformation matrix    a(t) b(t) c(t) d(t)  is regular.
Simplifying the expression gives the result  a(t)d(t)  b(t)c(t)  x01 y20 x02 y10 x01 y30 + x03 y10 + x02 y30 x03 y20 ; y2 x1 y3 x1 y2 x3 + y1 x3 + y3 x2 y1 x2 where x0i = ai (t)xi + bi (t)yi + ei (t) and yi0 = ci (t)xi + di (t)yi + fi (t), i = 1; 2; 3: This expression is zero if the three points (x1 ; y1 ), (x2 ; y2 ) and (x3 ; y3 ) are collinear or if their transformations under the original affinities are collinear (at some moment t).
By assumption, the points (x1 ; y1 ), (x2 ; y2 ) and (x3 ; y3 ) form a triangle, and affinities preserve (non-) collinearity.
The coefficients of the resulting affine transformation are linear functions of the coefficients of the original transformations of the corner points (x1 ; y1 ), (x2 ; y2 ) and (x3 ; y3 ).
As the original transformations are rational, the resulting affine transformation is rational too.
Now we investigate the situation if the intersection of O1 and O1 is a line segment.
The movement of the two endpoints of the line (x1 ; y1 ) and (x2 ; y2 ) are affine transformations        ai (t) bi (t) ci (t) di (t)   xy  +    ei (t) fi (t) ; i = 1; 2:;  as both O1 and O1 have affine transformation functions.
We prove that there always exists a rational affine function, with the translation components e(t) and f (t) being zero, that transforms the line segment.
The condition for the existence of a single affinity that transforms the two endpoints of the line segment according to their respective affinities is that the first matrix in the following equation is regular (to save space time dependence is omitted).
0 1 0 1 0 1 x1 y1 0 0 a(t) a1 x1 + b1y1 + e1 B 0 0 x1 y1 C  B b(t) C = B c1 x1 + d1 y1 + f1 C B @x2 y2 0 0 C A B @ c(t) C A B @a2 x2 + b2y2 + e2 C A 0  0  x2 y2  d(t)  c2 x2 + d2 y2 + f2  0-7695-0756-5/00 $10.00 AL 2000 IEEE  This is true if the two endpoints of the line segment do not coincide.
As in this part of the proof we assume that the intersection is a line segment, and not a single point, the condition is satisfied.
The affinity that determines the movement of the intersection, found by solving the above equation, is the following (to save space time dependence is omitted):  a(t) = e1 y2 y1 a2 x2 y1xb12yy22 yx12ey21+a1 x1 y2 +b1 y1 y2 ; b(t) = x2 e1 x1 a2 x2 x1xb21 yy22 xx21ye21+x2 a1 x1 +x2 b1 y1 ; c(t) = f1 y2 y1 c2 x2 y1xd12yy22 xy12fy21+c1 x1 y2 +d1 y1 y2 ; d(t) = x2f1 x1 c2 x2 x1xd12yy22 xx21yf21 +x2 c1 x1 +x2 d1 y1 : As in the more general case above, it can be shown that    a(t) b(t) c(t) d(t)    is regular and therefore determines an affinity.
This solution is linear in the components of the original rational affine transformations of O1 and O1 , so it is also rational.
The only situation left is when the intersection is a single point.
It is trivial that in this case the intersectionas movement is a rational affine transformation.
Rat i is closed Now we have shown that the class hST r, FA under intersection, as the class is atomically closed under intersection.
The proof for the atomic closure under difference is analogous.
By Atomicity, we know that if the class Rat i is atomically closed under difference and inhST r, FA tersection, then it is closed under difference.
ut